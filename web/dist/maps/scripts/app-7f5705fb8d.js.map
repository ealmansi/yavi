{"version":3,"sources":["scripts/app-7f5705fb8d.js"],"names":["angular","module","directiveFunction","$interpolate","controllerFunction","wikipediaPages","$scope","$state","vm","this","page","getPageById","pageId","onCardClick","go","linkFunction","scope","element","getThumbnail","then","thumbnail","backgroundImageTemplate","find","css","getTitle","title","html","getDescription","description","pageDescriptionElement","dotdotdot","ellipsis","getCategoryList","categoryList","listElement","itemElementTemplate","forEach","category","append","directive","controller","controllerAs","link","restrict","templateUrl","$inject","$q","$location","$rootScope","isValidId","period","periodSelectionWatch","$on","event","newPeriod","startDate","endDate","onPeriodSelection","makeChart","chartData","d3","svg","BubbleChart","supportResponsive","container","size","innerRadius","radiusMin","data","plugins","name","options","text","style","font-size","font-style","font-family","text-anchor","fill","attr","dy","centralClick","item","format","textField","classed","x","d","cx","y","cy","count","centralFormat","empty","getRelatedPages","relatedPages","classedFunction","itemClassTemplate","buildEvalFunction","maxScore","score","items","wrappedPromises","pageIdScore","isDefined","relatedPage","wrappedPromise","push","all","length","Math","max","sort","itemA","itemB","scoreDifference","reverse","itemRanking","eval","stateToHome","searchResults","$parent","$anchorScroll","$timeout","wikipediaAPI","query","searchBoxInputDebounce","searchOngoing","onChangeTimerCurrent","undefined","onChange","value","onChangeTimerAtSearch","search","cancel","onSubmit","focus","wikipediaSources","yaviConfig","getWikipediaSourceById","wikipediaId","matchingWikipediaSource","wikipediaSource","navbarMenuIsCollapsed","toggleNavbarMenu","activeWikipediaSource","selectWikipediaSource","current","reload","inherit","$log","dateValueComparator","dateValueA","dateValueB","dateTimeA","Date","date","getTime","dateTimeB","dateCompare","divId","dataList","renderedListener","chart","zoomToIndexes","dataProvider","zoomedListener","AmCharts","type","theme","marginRight","marginLeft","autoMarginOffset","dataDateFormat","valueAxes","id","axisAlpha","position","ignoreAxisWidth","balloon","borderThickness","shadowAlpha","graphs","drop","adjustBorderColor","color","bullet","bulletBorderAlpha","bulletColor","bulletSize","hideBulletsCount","lineThickness","useLineColorForBulletBorder","valueField","balloonText","chartScrollbar","graph","oppositeAxis","offset","scrollbarHeight","backgroundAlpha","selectedBackgroundAlpha","selectedBackgroundColor","graphFillAlpha","graphLineAlpha","selectedGraphFillAlpha","selectedGraphLineAlpha","autoGridCount","chartCursor","pan","valueLineEnabled","valueLineBalloonEnabled","cursorAlpha","cursorColor","limitToGraph","valueLineAlpha","valueScrollbar","categoryField","categoryAxis","parseDates","dashLength","minorGridEnabled","export","enabled","invalidateSize","addListener","zoomedListenerTimer","numberOfAddedInlinksChart","numberOfAddedOutlinksChart","numberOfRevertedRevisionsChart","numberOfRevisionsChart","numberOfTotalOutlinksChart","numberOfUniqueEditorsChart","pageContentSizeChart","activeTab","onSelect","tabId","makeChartNumberOfAddedInlinks","makeChartNumberOfAddedOutlinks","makeChartNumberOfRevertedRevisions","makeChartNumberOfRevisions","makeChartNumberOfTotalOutlinks","makeChartNumberOfUniqueEditors","makeChartPageContentSize","getNumberOfAddedInlinksList","numberOfAddedInlinksList","getNumberOfAddedOutlinksList","numberOfAddedOutlinksList","getNumberOfRevertedRevisionsList","numberOfRevertedRevisionsList","getNumberOfRevisionsList","numberOfRevisionsList","getNumberOfTotalOutlinksList","numberOfTotalOutlinksList","getNumberOfUniqueEditorsList","numberOfUniqueEditorsList","getPageContentSizeList","pageContentSizeList","radarLabels","radarData","lineLabels","lineSeries","lineData","datePicker","onApply","$emit","searchBoxInput","carrouselSlides","image","carrouselNoWrap","getImagesList","imagesList","imageA","imageB","width","height","imageId","url","pageWikipediaLinkElement","pageWikipediaLinkTemplate","pageGoogleLinkElement","on","animate","scrollTop","top","factoryFunction","getPageTitleFunction","pageTitleTemplate","pageTitle","setPageTitleFunction","newPageTitle","setDefaultPageTitleFunction","defaultPageTitle","getPageTitle","setPageTitle","setDefaultPageTitle","factory","yvPageTitleConfig","$watch","template","$http","buildPageSignalQuery","signalType","dateFrom","dateTo","queryTemplate","buildPageRelatedPagesQuery","throwYaviServerError","errorMessage","getPageSignal","onSuccess","response","onError","jsonp","getPageRelatedPages","WikipediaPage","pages","pageIdInteger","parseInt","pageIdArg","hasOwnProperty","serviceFunction","yaviServer","self","isUndefined","getPageCategories","val","when","getPageDescription","getPageImagesList","getPageThumbnail","service","buildPageCategoriesQuery","buildPageBasicDataQuery","buildPageImagesListQuery","buildPageThumbnailQuery","buildSearchQuery","buildPageIdByTitleQuery","throwWikipediaAPIError","categories","categoryTitles","categoryTitle","categoryTitleNoPrefix","substr","indexOf","extract","acceptedImageExtensions","blackListedImages","imageObjects","imageinfo","urlLowerCase","toLowerCase","isBlackListed","blackListedImage","extension","split","pop","imageList","imageObject","source","isArray","results","pageIds","result","getPageIdByTitle","pageDescription","pageIdArray","Object","keys","$stateParams","absoluteURL","absUrl","runBlock","run","routerConfig","$stateProvider","$urlRouterProvider","$locationProvider","state","params","otherwise","html5Mode","config","constant","flagId","language","$logProvider","$httpProvider","$provide","debugEnabled","defaults","cache","decorator","exception","debug","$templateCache","put"],"mappings":"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","file":"scripts/app-7f5705fb8d.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('yavi', [\n      'chart.js',\n      'daterangepicker',\n      'ngAnimate',\n      'ngAria',\n      'ngCookies',\n      'ngMessages',\n      'ngResource',\n      'ngSanitize',\n      'ngTouch',\n      'toastr',\n      'ui.bootstrap',\n      'ui.router'\n    ]);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvHomeSearchResultsCard', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction($interpolate) {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      link: linkFunction,\n      restrict: 'E',\n      scope: true,\n      templateUrl: 'app/home/yv-home-search-results/yv-home-search-results-card/yvHomeSearchResultsCard.html'\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function controllerFunction(wikipediaPages, $scope, $state) {\n      var vm = this;\n\n      vm.page = wikipediaPages.getPageById($scope.pageId);\n\n      vm.onCardClick = function() {\n        $state.go('explorePage', {\n          pageId: vm.page.pageId\n        });\n      }\n    }\n\n    function linkFunction(scope, element) {\n      scope.vm.page.getThumbnail().then(function(thumbnail) {\n        var backgroundImageTemplate = \"url('{{ thumbnail }}')\";\n        element.find('.page-thumbnail')\n            .css('background-image', $interpolate(backgroundImageTemplate)({\n              thumbnail: thumbnail\n            }));\n      });\n\n      scope.vm.page.getTitle().then(function(title) {\n        element.find('.page-title')\n            .html(title);\n      });\n      \n      scope.vm.page.getDescription().then(function(description) {\n        var pageDescriptionElement = element.find('.page-description');\n        pageDescriptionElement.html(description);\n        pageDescriptionElement.dotdotdot({\n          ellipsis: ' ...'\n        });\n      });\n\n      scope.vm.page.getCategoryList().then(function(categoryList) {\n        var listElement = element.find('.page-category-list');\n        var itemElementTemplate = '<li class=\"page-category-item\">{{ category }}</li>';\n        angular.forEach(categoryList, function(category) {\n          listElement.append($interpolate(itemElementTemplate)({\n            category: category\n          }));\n        });\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvRelatedPagesBubbleChart', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction(wikipediaPages, $q, $location, $state, $interpolate) {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      link: linkFunction,\n      restrict: 'E',\n      scope: {\n        'pageId': '=',\n        'period': '='\n      },\n      templateUrl: 'app/explore-page/yv-explore-page-related-pages-card/yv-related-pages-bubble-chart/yvRelatedPagesBubbleChart.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction(wikipediaPages, $scope, $rootScope) {\n      var vm = this;\n      \n      // Check if page id is valid.\n      if (!wikipediaPages.isValidId($scope.pageId)) {\n        return;\n      }\n      \n      // Get page and period.\n      vm.page = wikipediaPages.getPageById($scope.pageId);\n      vm.period = $scope.period;\n\n      var periodSelectionWatch = $rootScope.$on('periodSelection', function(event, newPeriod) {\n        vm.period.startDate = newPeriod.startDate;\n        vm.period.endDate = newPeriod.endDate;\n        onPeriodSelection(vm.page, vm.period.startDate, vm.period.endDate);\n      });\n\n      $scope.$on('$destroy', periodSelectionWatch);\n    }\n\n    function linkFunction(scope) {\n      onPeriodSelection(scope.vm.page, scope.vm.period.startDate, scope.vm.period.endDate);\n    }\n\n    function onPeriodSelection(page, startDate, endDate) {\n      angular.element(\"#bubble-chart\").empty();\n      page.getRelatedPages(startDate, endDate).then(function(relatedPages) {\n        var items = [], wrappedPromises = [];\n        angular.forEach(relatedPages, function(pageIdScore) {\n          if (angular.isDefined(pageIdScore)\n              && angular.isDefined(pageIdScore.pageId)\n              && angular.isDefined(pageIdScore.score)) {\n            var pageId = pageIdScore.pageId;\n            var score = pageIdScore.score;\n            var relatedPage = wikipediaPages.getPageById(pageId);\n            var wrappedPromise = relatedPage.getTitle()\n                .then(function(title) {\n                  items.push({\n                    pageId: pageId,\n                    text: title,\n                    score: score\n                  });\n                })\n                .catch(function() {\n                  /* Skip if title cannot be retrieved. */\n                });\n            wrappedPromises.push(wrappedPromise);\n          }\n        });\n\n        $q.all(wrappedPromises).then(function() {\n          if (items.length > 0) {\n            var maxScore = 0;\n            angular.forEach(items, function(item) {\n              maxScore = Math.max(maxScore, item.score);\n            });\n\n            items.sort(function(itemA, itemB) {\n              var scoreDifference = itemA.score - itemB.score;\n              if (scoreDifference != 0) {\n                return scoreDifference;\n              }\n              return itemA.pageId - itemB.pageId;\n            });\n            items.reverse();\n\n            var itemRanking = 1;\n            angular.forEach(items, function(item) {\n              item.count = itemRanking;\n              itemRanking += 1;\n            });\n\n            makeChart({\n                classed: classedFunction,\n                eval: buildEvalFunction(maxScore),\n                items: items\n            }, startDate, endDate);\n            \n            // var absUrl = $location.absUrl();\n            // angular.forEach(items, function(item) {\n            //   var page = wikipediaPages.getPageById(item.pageId);\n            //   var circleElement = element.find('.' + classedFunction(item) + ' > circle');\n            //   circleElement.attr('style', 'fill: url(' + absUrl + '#image' + item.count + ')');\n            //   page.getThumbnail().then(function(thumbnail) {\n            //     element.find('#image' + item.count + ' > image').attr('xlink:href', thumbnail);\n            //   });\n            // });\n            \n          }\n        });\n        \n        function classedFunction(item) {\n          var itemClassTemplate = 'related-page-{{pageId}}';\n          return $interpolate(itemClassTemplate)({pageId: item.pageId});\n        }\n\n        function buildEvalFunction(maxScore) {\n          return function evalFunction(item) {\n            if (maxScore > 0) {\n              return 100 * item.score / maxScore;\n            } else {\n              return 1;\n            }\n            return item.score;\n          }\n        }\n      });\n\n      function makeChart(chartData, startDate, endDate) {\n        new d3.svg.BubbleChart({\n          supportResponsive: true,\n          container: '#bubble-chart',\n          size: 600,\n          //viewBoxSize: => use @default\n          innerRadius: 600 / 3.5,\n          //outerRadius: => use @default\n          radiusMin: 50,\n          //radiusMax: use @default\n          //intersectDelta: use @default\n          //intersectInc: use @default\n          //circleColor: use @default\n          data: chartData,\n          plugins: [\n            {\n              name: \"central-click\",\n              options: {\n                text: \"(See more detail)\",\n                style: {\n                  \"font-size\": \"12px\",\n                  \"font-style\": \"italic\",\n                  \"font-family\": \"Source Sans Pro, sans-serif\",\n                  //\"font-weight\": \"700\",\n                  \"text-anchor\": \"middle\",\n                  \"fill\": \"black\"\n                },\n                attr: {dy: \"65px\"},\n                centralClick: function(item) {\n                  $state.go('explorePage', {\n                    pageId: item.pageId,\n                    startDate: startDate,\n                    endDate: endDate\n                  });\n                }\n              }\n            },\n            {\n              name: \"lines\",\n              options: {\n                format: [\n                  {// Line #0\n                    textField: \"text\",\n                    classed: {text: true},\n                    style: {\n                      \"font-size\": \"24px\",\n                      \"font-family\": \"Source Sans Pro, sans-serif\",\n                      \"text-anchor\": \"middle\",\n                      fill: \"black\"\n                    },\n                    attr: {\n                      dy: \"0px\",\n                      x: function (d) {return d.cx;},\n                      y: function (d) {return d.cy;}\n                    }\n                  },\n                  {// Line #1\n                    textField: \"count\",\n                    classed: {count: true},\n                    style: {\n                      \"font-size\": \"14px\",\n                      \"font-family\": \"Source Sans Pro, sans-serif\",\n                      \"text-anchor\": \"middle\",\n                      fill: \"black\"\n                    },\n                    attr: {\n                      dy: \"20px\",\n                      x: function (d) {return d.cx;},\n                      y: function (d) {return d.cy;}\n                    }\n                  }\n                ],\n                centralFormat: [\n                  {// Line #0\n                    style: {\"font-size\": \"50px\"},\n                    attr: {}\n                  },\n                  {// Line #1\n                    style: {\"font-size\": \"30px\"},\n                    attr: {dy: \"40px\"}\n                  }\n                ]\n              }\n            }]\n        });\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvPageNotFoundNavbar', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: true,\n      templateUrl: 'app/page-not-found/yv-page-not-found-navbar/yvPageNotFoundNavbar.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction($state) {\n      var vm = this;\n\n      vm.stateToHome = function() {\n        $state.go('home');\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvHomeSearchResults', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: true,\n      templateUrl: 'app/home/yv-home-search-results/yvHomeSearchResults.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction($scope) {\n      var vm = this;\n\n      // Home properties.\n      vm.searchResults = $scope.$parent.vm.searchResults;\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvHomeSearchBox', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      link: linkFunction,\n      restrict: 'E',\n      scope: true,\n      templateUrl: 'app/home/yv-home-search-box/yvHomeSearchBox.html'\n    };\n\n    return directive;\n  \n    /** @ngInject */\n    function controllerFunction($scope, $location, $anchorScroll, $timeout, wikipediaAPI, $state) {\n      var vm = this;\n\n      // Home properties.\n      vm.query = $scope.$parent.vm.query;\n      vm.searchResults = $scope.$parent.vm.searchResults;\n      vm.searchBoxInputDebounce = 150;\n      vm.searchOngoing = false;\n\n      // Search box change.\n      var onChangeTimerCurrent = undefined;\n      vm.onChange = function() {\n        onChangeTimerCurrent = $timeout(function() {\n          if (vm.query.value) {\n            vm.searchOngoing = true;\n            var onChangeTimerAtSearch = onChangeTimerCurrent;\n            wikipediaAPI.search(vm.query.value)\n                .then(function(searchResults) {\n                  if (onChangeTimerAtSearch == onChangeTimerCurrent) {\n                    vm.searchResults.value = searchResults;\n                  }\n                  vm.searchOngoing = false;\n                })\n                .catch(function() {\n                  vm.searchOngoing = false;\n                });\n          } else {\n            vm.searchResults.value = [];\n          }\n        });\n      }\n      $scope.$on(\"$destroy\", function() {\n        if (angular.isDefined(onChangeTimerCurrent)) {\n          $timeout.cancel(onChangeTimerCurrent);\n        }\n      });\n\n      // Search box submit.\n      vm.onSubmit = function() {\n        if (vm.searchResults.value.length > 0) {\n          $state.go('explorePage', {\n            pageId: vm.searchResults.value[0]\n          });\n        }\n      }\n    }\n    \n    function linkFunction(scope, element) {\n      element.find('#home-search-box-input').focus();\n      scope.vm.onChange();\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvHomeNavbar', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: true,\n      templateUrl: 'app/home/yv-home-navbar/yvHomeNavbar.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction($scope, wikipediaSources, yaviConfig, $state) {\n      var vm = this;\n      \n      // Home properties.\n      vm.query = $scope.$parent.vm.query;\n\n      // Collapsing.\n      vm.navbarMenuIsCollapsed = true;\n      vm.toggleNavbarMenu = function() {\n        vm.navbarMenuIsCollapsed = !vm.navbarMenuIsCollapsed;\n      }\n\n      // Wikipedia sources.\n      vm.wikipediaSources = wikipediaSources;\n      vm.activeWikipediaSource = getWikipediaSourceById(yaviConfig.wikipediaId);\n      vm.selectWikipediaSource = function(wikipediaId) {\n        var wikipediaSource = getWikipediaSourceById(wikipediaId);\n        if (angular.isDefined(wikipediaSource)) {\n          yaviConfig.wikipediaId = wikipediaSource.wikipediaId;\n          $state.go($state.current, {\n            query: vm.query.value\n          }, {reload: true, inherit: false});\n        }\n      }\n      \n      function getWikipediaSourceById(wikipediaId) {\n        var matchingWikipediaSource = undefined;\n        angular.forEach(wikipediaSources, function(wikipediaSource) {\n          if (wikipediaSource.wikipediaId == wikipediaId) {\n            matchingWikipediaSource = wikipediaSource;\n          }\n        });\n        return matchingWikipediaSource;\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvHomeImagetype', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      restrict: 'E',\n      scope: true,\n      templateUrl: 'app/home/yv-home-imagetype/yvHomeImagetype.html'\n    };\n\n    return directive;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvExplorePageSignalsCard', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction(wikipediaPages, $log) {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: {\n        pageId: '=',\n        period: '='\n      },\n      templateUrl: 'app/explore-page/yv-explore-page-signals-card/yvExplorePageSignalsCard.html'\n    };\n\n    return directive;\n  \n    /** @ngInject */\n    function controllerFunction($scope, $rootScope, $timeout) {\n      var vm = this;\n\n      //\n      var zoomedListenerTimer = undefined;\n      $scope.$on('$destroy', function() {\n        if (angular.isDefined(zoomedListenerTimer)) {\n          $timeout.cancel(zoomedListenerTimer);\n        }\n      });\n\n      //\n      vm.numberOfAddedInlinksChart = undefined;\n      vm.numberOfAddedOutlinksChart = undefined;\n      vm.numberOfRevertedRevisionsChart = undefined;\n      vm.numberOfRevisionsChart = undefined;\n      vm.numberOfTotalOutlinksChart = undefined;\n      vm.numberOfUniqueEditorsChart = undefined;\n      vm.pageContentSizeChart = undefined;\n\n      // Check if page id is valid.\n      if (!wikipediaPages.isValidId($scope.pageId)) {\n        return;\n      }\n      \n      // Get page and period.\n      vm.page = wikipediaPages.getPageById($scope.pageId);\n      vm.period = $scope.period;\n\n      var startDate = vm.period.startDate, endDate = vm.period.endDate;\n      var activeTab = undefined;\n      vm.onSelect = function(tabId) {\n        activeTab = tabId;\n        switch (activeTab) {\n        case 'number-of-added-inlinks':\n          vm.makeChartNumberOfAddedInlinks(startDate, endDate);\n          break;\n        case 'number-of-added-outlinks':\n          vm.makeChartNumberOfAddedOutlinks(startDate, endDate);\n          break;\n        case 'number-of-reverted-revisions':\n          vm.makeChartNumberOfRevertedRevisions(startDate, endDate);\n          break;\n        case 'number-of-revisions':\n          vm.makeChartNumberOfRevisions(startDate, endDate);\n          break;\n        case 'number-of-total-outlinks':\n          vm.makeChartNumberOfTotalOutlinks(startDate, endDate);\n          break;\n        case 'number-of-unique-editors':\n          vm.makeChartNumberOfUniqueEditors(startDate, endDate);\n          break;\n        case 'page-content-size':\n          vm.makeChartPageContentSize(startDate, endDate);\n          break;\n        default:\n          break;\n        }\n      }\n\n      var periodSelectionWatch = $rootScope.$on('periodSelection', function(event, period) {\n        startDate = period.startDate;\n        endDate = period.endDate;\n        vm.onSelect(activeTab);\n      });\n\n      $scope.$on('$destroy', periodSelectionWatch);\n      \n      vm.makeChartNumberOfAddedInlinks = function(startDate, endDate) {\n          vm.page.getNumberOfAddedInlinksList(startDate, endDate)\n              .then(function(numberOfAddedInlinksList) {\n                  numberOfAddedInlinksList.sort(dateValueComparator);\n                  vm.numberOfAddedInlinksChart = makeChart('chart-number-of-added-inlinks',\n                      numberOfAddedInlinksList);\n              });\n      }\n      \n      vm.makeChartNumberOfAddedOutlinks = function(startDate, endDate) {\n          vm.page.getNumberOfAddedOutlinksList(startDate, endDate)\n              .then(function(numberOfAddedOutlinksList) {\n                  numberOfAddedOutlinksList.sort(dateValueComparator);\n                  vm.numberOfAddedOutlinksChart = makeChart('chart-number-of-added-outlinks',\n                      numberOfAddedOutlinksList);\n              });\n      }\n      \n      vm.makeChartNumberOfRevertedRevisions = function(startDate, endDate) {\n          vm.page.getNumberOfRevertedRevisionsList(startDate, endDate)\n              .then(function(numberOfRevertedRevisionsList) {\n                  numberOfRevertedRevisionsList.sort(dateValueComparator);\n                  vm.numberOfRevertedRevisionsChart = makeChart('chart-number-of-reverted-revisions',\n                      numberOfRevertedRevisionsList);\n              });\n      }\n      \n      vm.makeChartNumberOfRevisions = function(startDate, endDate) {\n          vm.page.getNumberOfRevisionsList(startDate, endDate)\n              .then(function(numberOfRevisionsList) {\n                  numberOfRevisionsList.sort(dateValueComparator);\n                  vm.numberOfRevisionsChart = makeChart('chart-number-of-revisions',\n                      numberOfRevisionsList);\n              });\n      }\n      \n      vm.makeChartNumberOfTotalOutlinks = function(startDate, endDate) {\n          vm.page.getNumberOfTotalOutlinksList(startDate, endDate)\n              .then(function(numberOfTotalOutlinksList) {\n                  numberOfTotalOutlinksList.sort(dateValueComparator);\n                  vm.numberOfTotalOutlinksChart = makeChart('chart-number-of-total-outlinks',\n                      numberOfTotalOutlinksList);\n              });\n      }\n      \n      vm.makeChartNumberOfUniqueEditors = function(startDate, endDate) {\n          vm.page.getNumberOfUniqueEditorsList(startDate, endDate)\n              .then(function(numberOfUniqueEditorsList) {\n                  numberOfUniqueEditorsList.sort(dateValueComparator);\n                  vm.numberOfUniqueEditorsChart = makeChart('chart-number-of-unique-editors',\n                      numberOfUniqueEditorsList);\n              });\n      }\n      \n      vm.makeChartPageContentSize = function(startDate, endDate) {\n          vm.page.getPageContentSizeList(startDate, endDate)\n              .then(function(pageContentSizeList) {\n                  pageContentSizeList.sort(dateValueComparator);\n                  vm.pageContentSizeChart = makeChart('chart-page-content-size',\n                      pageContentSizeList);\n              });\n      }\n\n      function dateValueComparator(dateValueA, dateValueB) {\n        var dateTimeA = new Date(dateValueA.date).getTime();\n        var dateTimeB = new Date(dateValueB.date).getTime();\n        var dateCompare = dateTimeA - dateTimeB;\n        if (dateCompare != 0) {\n          return dateCompare;\n        } else {\n          return dateValueA.value - dateValueB.value;\n        }\n      }\n\n      function makeChart(divId, dataList) {\n        angular.element('#' + divId).empty();\n        var chart = AmCharts.makeChart(divId, {\n          \"type\": \"serial\",\n          \"theme\": \"light\",\n          \"marginRight\": 40,\n          \"marginLeft\": 40,\n          \"autoMarginOffset\": 20,\n          \"dataDateFormat\": \"YYYY-MM-DD\",\n          \"valueAxes\": [{\n            \"id\": \"v1\",\n            \"axisAlpha\": 0,\n            \"position\": \"left\",\n            \"ignoreAxisWidth\":true\n          }],\n          \"balloon\": {\n            \"borderThickness\": 1,\n            \"shadowAlpha\": 0\n          },\n          \"graphs\": [{\n            \"id\": \"g1\",\n            \"balloon\":{\n              \"drop\":true,\n              \"adjustBorderColor\":false,\n              \"color\":\"#ffffff\"\n            },\n            \"bullet\": \"round\",\n            \"bulletBorderAlpha\": 1,\n            \"bulletColor\": \"#FFFFFF\",\n            \"bulletSize\": 5,\n            \"hideBulletsCount\": 50,\n            \"lineThickness\": 2,\n            \"title\": \"red line\",\n            \"useLineColorForBulletBorder\": true,\n            \"valueField\": \"value\",\n            \"balloonText\": \"<span style='font-size:18px;'>[[value]]</span>\"\n          }],\n          \"chartScrollbar\": {\n            \"graph\": \"g1\",\n            \"oppositeAxis\":false,\n            \"offset\":30,\n            \"scrollbarHeight\": 80,\n            \"backgroundAlpha\": 0,\n            \"selectedBackgroundAlpha\": 0.1,\n            \"selectedBackgroundColor\": \"#888888\",\n            \"graphFillAlpha\": 0,\n            \"graphLineAlpha\": 0.5,\n            \"selectedGraphFillAlpha\": 0,\n            \"selectedGraphLineAlpha\": 1,\n            \"autoGridCount\":true,\n            \"color\":\"#AAAAAA\"\n          },\n          \"chartCursor\": {\n            \"pan\": true,\n            \"valueLineEnabled\": true,\n            \"valueLineBalloonEnabled\": true,\n            \"cursorAlpha\":1,\n            \"cursorColor\":\"#258cbb\",\n            \"limitToGraph\":\"g1\",\n            \"valueLineAlpha\":0.2\n          },\n          \"valueScrollbar\":{\n            \"oppositeAxis\":false,\n            \"offset\":50,\n            \"scrollbarHeight\":10\n          },\n          \"categoryField\": \"date\",\n          \"categoryAxis\": {\n            \"parseDates\": true,\n            \"dashLength\": 1,\n            \"minorGridEnabled\": true\n          },\n          \"export\": {\n            \"enabled\": true\n          },\n          \"dataProvider\": dataList\n        });\n\n        chart.invalidateSize();\n        \n        chart.addListener(\"rendered\", renderedListener);\n        renderedListener();\n\n        chart.addListener(\"zoomed\", zoomedListener);\n\n        return chart;\n\n        function renderedListener() {\n          chart.zoomToIndexes(chart.dataProvider.length - 40, chart.dataProvider.length - 1);\n        }\n\n        function zoomedListener(event) {\n          // if (angular.isDefined(zoomedListenerTimer)) {\n          //   $timeout.cancel(zoomedListenerTimer);\n          // }\n          // zoomedListenerTimer = $timeout(function() {\n          //   $scope.$emit('periodSelection', {\n          //     startDate: event.startDate,\n          //     endDate: event.endDate\n          //   });\n          // }, 50 /* zooomed event buffer wait */);\n        }\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvExplorePageRelatedPagesCard', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: {\n        pageId: '=',\n        period: '='\n      },\n      templateUrl: 'app/explore-page/yv-explore-page-related-pages-card/yvExplorePageRelatedPagesCard.html'\n    };\n\n    return directive;\n  \n    /** @ngInject */\n    function controllerFunction(wikipediaPages, $scope) {\n      var vm = this;\n\n      // Check if page id is valid.\n      if (!wikipediaPages.isValidId($scope.pageId)) {\n        return;\n      }\n      \n      // Get page and period.\n      vm.page = wikipediaPages.getPageById($scope.pageId);\n      vm.period = $scope.period;\n    }\n  }\n\n})();\n\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvExplorePagePopularityCard', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: {\n        pageId: '=',\n        period: '='\n      },\n      templateUrl: 'app/explore-page/yv-explore-page-popularity-card/yvExplorePagePopularityCard.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction(wikipediaPages, $scope) {\n      var vm = this;\n\n      // Check if page id is valid.\n      if (!wikipediaPages.isValidId($scope.pageId)) {\n        return;\n      }\n      \n      // Get page and period.\n      vm.page = wikipediaPages.getPageById($scope.pageId);\n      vm.period = $scope.period;\n\n      // Mock data for chart.\n      vm.radarLabels = [\"Eating\", \"Drinking\", \"Sleeping\", \"Designing\", \"Coding\", \"Cycling\", \"Running\"];\n      vm.radarData = [\n        [65, 59, 90, 81, 56, 55, 40],\n        [28, 48, 40, 19, 96, 27, 100]\n      ];\n\n      vm.lineLabels = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\"];\n      vm.lineSeries = ['Series A', 'Series B'];\n      vm.lineData = [\n        [65, 59, 80, 81, 56, 55, 40],\n        [28, 48, 40, 19, 86, 27, 90]\n      ];\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvExplorePagePeriodSelectorCard', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: {\n        pageId: '=',\n        period: '='\n      },\n      templateUrl: 'app/explore-page/yv-explore-page-period-selector-card/yvExplorePagePeriodSelectorCard.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction(wikipediaPages, $scope, $log) {\n      var vm = this;\n\n      // Check if page id is valid.\n      if (!wikipediaPages.isValidId($scope.pageId)) {\n        return;\n      }\n      \n      // Get page and period.\n      vm.page = wikipediaPages.getPageById($scope.pageId);\n      vm.period = $scope.period;\n\n      vm.datePicker = {date: {startDate: vm.period.startDate, endDate: vm.period.endDate}};\n      vm.onApply = function() {\n        $scope.$emit('periodSelection', {\n          startDate: vm.datePicker.date.startDate.format('YYYY-MM-DD'),\n          endDate: vm.datePicker.date.endDate.format('YYYY-MM-DD')\n        });\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvExplorePageNavbar', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: {\n        pageId: '='\n      },\n      templateUrl: 'app/explore-page/yv-explore-page-navbar/yvExplorePageNavbar.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction(wikipediaPages, $scope, $state) {\n      var vm = this;\n\n      //      \n      vm.navbarMenuIsCollapsed = true;\n      vm.searchBoxInput = '';\n\n      //\n      vm.onChange = function() {\n        vm.onSubmit();\n      }\n\n      vm.onSubmit = function() {\n        $state.go('home', {\n          query: vm.searchBoxInput\n        });\n      }\n      \n      vm.stateToHome = function() {\n        $state.go('home');\n      }\n\n      vm.toggleNavbarMenu = function() {\n        vm.navbarMenuIsCollapsed = !vm.navbarMenuIsCollapsed;\n      }\n\n      //\n      if (!wikipediaPages.isValidId($scope.pageId)) {\n        return;\n      }\n      \n      vm.page = wikipediaPages.getPageById($scope.pageId);\n\n      vm.page.getTitle().then(function(title) {\n        vm.searchBoxInput = title;\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvExplorePageMainCard', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction(yaviConfig, wikipediaSources, $interpolate) {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      link: linkFunction,\n      restrict: 'E',\n      scope: {\n        pageId: '=',\n        period: '='\n      },\n      templateUrl: 'app/explore-page/yv-explore-page-main-card/yvExplorePageMainCard.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction(wikipediaPages, $scope) {\n      var vm = this;\n      \n      //\n      vm.carrouselSlides = [{\n        image: '/yavi/web/dist/assets/images/fallback-thumbnail.png',\n        id: 0\n      }];\n      vm.carrouselNoWrap = false;\n\n      // Check if page id is valid.\n      if (!wikipediaPages.isValidId($scope.pageId)) {\n        return;\n      }\n      \n      // Get page and period.\n      vm.page = wikipediaPages.getPageById($scope.pageId);\n      vm.period = $scope.period;\n\n      // TODO: deduplicate this code.\n      vm.activeWikipediaSource = getWikipediaSourceById(yaviConfig.wikipediaId);\n      function getWikipediaSourceById(wikipediaId) {\n        var matchingWikipediaSource = undefined;\n        angular.forEach(wikipediaSources, function(wikipediaSource) {\n          if (wikipediaSource.wikipediaId == wikipediaId) {\n            matchingWikipediaSource = wikipediaSource;\n          }\n        });\n        return matchingWikipediaSource;\n      }\n    }\n\n    function linkFunction(scope, element) {\n      scope.vm.page.getImagesList().then(function(imagesList) {\n        if (imagesList.length > 0) {\n          scope.vm.carrouselSlides = [];\n          imagesList.sort(function(imageA, imageB) {\n            return imageB.width * imageB.height - imageA.width * imageA.height;\n          });\n          var imageId = 0;\n          angular.forEach(imagesList, function(image) {\n            scope.vm.carrouselSlides.push({\n              image: image.url,\n              id: imageId\n            });\n            imageId += 1;\n          });\n        }\n      });\n\n      scope.vm.page.getTitle().then(function(title) {\n        element.find('#page-title')\n            .html(title);\n      });\n      \n      scope.vm.page.getDescription().then(function(description) {\n        var pageDescriptionElement = element.find('#page-description');\n        pageDescriptionElement.html(description);\n        pageDescriptionElement.dotdotdot({\n          ellipsis: ' ...'\n        });\n      });\n\n      scope.vm.page.getCategoryList().then(function(categoryList) {\n        var listElement = element.find('#page-category-list');\n        var itemElementTemplate = '<li class=\"page-category-item\">{{ category }}</li>';\n        angular.forEach(categoryList, function(category) {\n          listElement.append($interpolate(itemElementTemplate)({\n            category: category\n          }));\n        });\n      });\n\n      var pageWikipediaLinkElement = element.find('#page-wikipedia-link');\n      var pageWikipediaLinkTemplate = 'https://{{wikipediaId}}.wikipedia.org/?curid={{pageId}}';\n      pageWikipediaLinkElement.attr('href', $interpolate(pageWikipediaLinkTemplate)({\n        wikipediaId: scope.vm.activeWikipediaSource.wikipediaId,\n        pageId: scope.vm.page.pageId\n      }));\n\n      scope.vm.page.getTitle().then(function(title) {\n        var pageGoogleLinkElement = element.find('#page-google-link');\n        pageGoogleLinkElement.attr('href', 'https://google.com/?q=' + title);\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvScrollOnClick', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      link: linkFunction,\n      restrict: 'A'\n    };\n\n    return directive;\n    \n    function linkFunction(scope, element) {\n      element.on('click', function() {\n        angular.element('body').animate({\n          scrollTop: angular.element('yv-home-imagetype').offset().top\n        }, \"fast\");\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .factory('yvPageTitleConfig', factoryFunction);\n\n  /** @ngInject */\n  function factoryFunction($interpolate) {\n    var pageTitleTemplate = 'Yavi - {{pageTitle}}';\n    var defaultPageTitle = 'Visualize Wikipedia';\n    var pageTitle = defaultPageTitle;\n\n    return {\n      getPageTitle: getPageTitleFunction,\n      setPageTitle: setPageTitleFunction,\n      setDefaultPageTitle: setDefaultPageTitleFunction\n    };\n\n    function getPageTitleFunction() {\n      return $interpolate(pageTitleTemplate)({pageTitle: pageTitle});\n    }\n    \n    function setPageTitleFunction(newPageTitle) {\n      pageTitle = newPageTitle;\n    }\n    \n    function setDefaultPageTitleFunction() {\n      setPageTitleFunction(defaultPageTitle);\n    }\n  }\n  \n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvPageTitle', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction(yvPageTitleConfig) {\n    var directive = {\n      link: linkFunction,\n      restrict: 'E',\n      scope: true,\n      template: '<title></title>'\n    };\n\n    return directive;\n    \n    function linkFunction(scope, element) {\n      scope.$watch(function() {\n        return yvPageTitleConfig.getPageTitle();\n      }, function(newPageTitle) {\n        element.find('title').html(newPageTitle);\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .factory('yaviServer', factoryFunction);\n\n  /** @ngInject */\n  function factoryFunction($http, yaviConfig, $interpolate) {\n\n    var factory = {};\n\n    factory.getPageSignal = function(signalType, pageId, dateFrom, dateTo) {\n      return $http\n        .jsonp(buildPageSignalQuery(signalType, pageId, dateFrom, dateTo))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (angular.isDefined(response)\n            && angular.isDefined(response.data)) {\n          return response.data;\n        }\n        onError();\n      }\n\n      function onError() {\n        throwYaviServerError(\"Signal could not be retrieved\");\n      }\n    }\n\n    factory.getPageRelatedPages = function(pageId, dateFrom, dateTo) {\n      return $http\n        .jsonp(buildPageRelatedPagesQuery(pageId, dateFrom, dateTo))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (angular.isDefined(response)\n            && angular.isDefined(response.data)) {\n          return response.data;\n        }\n        onError();\n      }\n\n      function onError() {\n        throwYaviServerError(\"RelatedPages could not be retrieved\");\n      }\n    }\n\n    return factory;\n\n    function buildPageSignalQuery(signalType, pageId, dateFrom, dateTo) {\n      var queryTemplate = '';\n      queryTemplate += 'http://localhost:8080/yavi-server/signal?';\n      queryTemplate += '&pageid={{pageId}}';\n      queryTemplate += '&wikipediaid={{wikipediaId}}';\n      queryTemplate += '&datefrom={{dateFrom}}';\n      queryTemplate += '&dateto={{dateTo}}';\n      queryTemplate += '&signaltype={{signalType}}';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        signalType: signalType,\n        pageId: pageId,\n        wikipediaId: yaviConfig.wikipediaId,\n        dateFrom: dateFrom,\n        dateTo: dateTo\n      });\n    }\n    \n    function buildPageRelatedPagesQuery(pageId, dateFrom, dateTo) {\n      var queryTemplate = '';\n      queryTemplate += 'http://localhost:8080/yavi-server/relatedpages?';\n      queryTemplate += '&pageid={{pageId}}';\n      queryTemplate += '&wikipediaid={{wikipediaId}}';\n      queryTemplate += '&datefrom={{dateFrom}}';\n      queryTemplate += '&dateto={{dateTo}}';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        pageId: pageId,\n        wikipediaId: yaviConfig.wikipediaId,\n        dateFrom: dateFrom,\n        dateTo: dateTo\n      });\n    }\n\n    function throwYaviServerError(errorMessage) {\n      throw $interpolate(\"Yavi Server: {{errorMessage}}.\")({errorMessage: errorMessage});\n    }\n  }\n  \n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .factory('wikipediaPages', factoryFunction);\n\n  /** @ngInject */\n  function factoryFunction(WikipediaPage) {\n    var pages = {};\n\n    return new function() {\n      this.isValidId = function(pageId) {\n        var pageIdInteger = parseInt(pageId, 10);\n        return pageIdInteger > 0;\n      }\n\n      this.getPageById = function(pageIdArg) {\n        var pageId = parseInt(pageIdArg, 10);\n        if (!pages.hasOwnProperty(pageId)) {\n          pages[pageId] = new WikipediaPage(pageId);\n        }\n        return pages[pageId];\n      }\n    }\n  }\n  \n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .service('WikipediaPage', serviceFunction);\n\n  /** @ngInject */\n  function serviceFunction($q, wikipediaAPI, yaviServer) {\n    return WikipediaPage;\n\n    function WikipediaPage(pageId) {\n\n      var self = this;\n\n      self.pageId = pageId;\n\n      // Page properties.\n      var categoryList = undefined;\n      var description = undefined;\n      var imagesList = undefined;\n      var numberOfAddedInlinksList = undefined;\n      var numberOfAddedOutlinksList = undefined;\n      var numberOfRevertedRevisionsList = undefined;\n      var numberOfRevisionsList = undefined;\n      var numberOfTotalOutlinksList = undefined;\n      var numberOfUniqueEditorsList = undefined;\n      var pageContentSizeList = undefined;\n      var relatedPages = undefined;\n      var thumbnail = undefined;\n      var title = undefined;\n\n      // Property promise getters.\n      self.getCategoryList = function() {\n        if (angular.isUndefined(categoryList)) {\n          return wikipediaAPI.getPageCategories(pageId)\n              .then(function(val) {\n                categoryList = val;\n                return categoryList;\n              });\n        }\n        return $q.when(categoryList);\n      }\n\n      self.getDescription = function() {\n        if (angular.isUndefined(description)) {\n          return wikipediaAPI.getPageDescription(pageId)\n              .then(function(val) {\n                description = val;\n                return description;\n              });\n        }\n        return $q.when(description);\n      }\n\n      self.getImagesList = function() {\n        if (angular.isUndefined(imagesList)) {\n          return wikipediaAPI.getPageImagesList(pageId)\n              .then(function(val) {\n                imagesList = val;\n                return imagesList;\n              });\n        }\n        return $q.when(imagesList);\n      }\n\n      self.getNumberOfAddedInlinksList = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(numberOfAddedInlinksList)) {\n        return yaviServer.getPageSignal(\"numberofaddedinlinks\", pageId, dateFrom, dateTo)\n            .then(function(val) {\n              numberOfAddedInlinksList = val;\n              return numberOfAddedInlinksList;\n            });\n        }\n        return $q.when(numberOfAddedInlinksList);\n      }\n\n      self.getNumberOfAddedOutlinksList = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(numberOfAddedOutlinksList)) {\n        return yaviServer.getPageSignal(\"numberofaddedoutlinks\", pageId, dateFrom, dateTo)\n            .then(function(val) {\n              numberOfAddedOutlinksList = val;\n              return numberOfAddedOutlinksList;\n            });\n        }\n        return $q.when(numberOfAddedOutlinksList);\n      }\n\n      self.getNumberOfRevertedRevisionsList = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(numberOfRevertedRevisionsList)) {\n        return yaviServer.getPageSignal(\"numberofrevertedrevisions\", pageId, dateFrom, dateTo)\n            .then(function(val) {\n              numberOfRevertedRevisionsList = val;\n              return numberOfRevertedRevisionsList;\n            });\n        }\n        return $q.when(numberOfRevertedRevisionsList);\n      }\n\n      self.getNumberOfRevisionsList = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(numberOfRevisionsList)) {\n        return yaviServer.getPageSignal(\"numberofrevisions\", pageId, dateFrom, dateTo)\n            .then(function(val) {\n              numberOfRevisionsList = val;\n              return numberOfRevisionsList;\n            });\n        }\n        return $q.when(numberOfRevisionsList);\n      }\n\n      self.getNumberOfTotalOutlinksList = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(numberOfTotalOutlinksList)) {\n        return yaviServer.getPageSignal(\"numberoftotaloutlinks\", pageId, dateFrom, dateTo)\n            .then(function(val) {\n              numberOfTotalOutlinksList = val;\n              return numberOfTotalOutlinksList;\n            });\n        }\n        return $q.when(numberOfTotalOutlinksList);\n      }\n\n      self.getNumberOfUniqueEditorsList = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(numberOfUniqueEditorsList)) {\n        return yaviServer.getPageSignal(\"numberofuniqueeditors\", pageId, dateFrom, dateTo)\n            .then(function(val) {\n              numberOfUniqueEditorsList = val;\n              return numberOfUniqueEditorsList;\n            });\n        }\n        return $q.when(numberOfUniqueEditorsList);\n      }\n\n      self.getPageContentSizeList = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(pageContentSizeList)) {\n        return yaviServer.getPageSignal(\"pagecontentsize\", pageId, dateFrom, dateTo)\n            .then(function(val) {\n              pageContentSizeList = val;\n              return pageContentSizeList;\n            });\n        }\n        return $q.when(pageContentSizeList);\n      }\n\n      self.getRelatedPages = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(relatedPages)) {\n          return yaviServer.getPageRelatedPages(pageId, dateFrom, dateTo)\n              .then(function(val) {\n                relatedPages = val;\n                return relatedPages;\n              });\n        }\n        return $q.when(relatedPages);\n      }\n\n      self.getThumbnail = function() {\n        if (angular.isUndefined(thumbnail)) {\n          return wikipediaAPI.getPageThumbnail(pageId)\n              .then(function(val) {\n                thumbnail = val;\n                return thumbnail;\n              });\n        }\n        return $q.when(thumbnail);\n      }\n\n      self.getTitle = function() {\n        if (angular.isUndefined(title)) {\n          return wikipediaAPI.getPageTitle(pageId)\n              .then(function(val) {\n                title = val;\n                return title;\n              });\n        }\n        return $q.when(title);\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .factory('wikipediaAPI', factoryFunction);\n\n  /** @ngInject */\n  function factoryFunction($http, yaviConfig, $q, $interpolate) {\n\n    var factory = {};\n\n    factory.getPageCategories = function(pageId) {\n      return $http\n        .jsonp(buildPageCategoriesQuery(pageId))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (response\n            && response.data\n            && response.data.query\n            && response.data.query.pages\n            && response.data.query.pages[pageId]\n            && response.data.query.pages[pageId].categories) {\n          var categories = response.data.query.pages[pageId].categories;\n          var categoryTitles = [];\n          angular.forEach(categories, function(category) {\n            var categoryTitle = category.title;\n            var categoryTitleNoPrefix =\n                categoryTitle.substr(categoryTitle.indexOf(':') + 1, categoryTitle.length);\n            this.push(categoryTitleNoPrefix);\n          }, categoryTitles);\n          return categoryTitles;\n        }\n        onError();\n      }\n\n      function onError() {\n        throwWikipediaAPIError(\"Categories could not be retrieved\");\n      }\n    }\n\n    factory.getPageDescription = function(pageId) {\n      return $http\n        .jsonp(buildPageBasicDataQuery(pageId))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (response\n            && response.data\n            && response.data.query\n            && response.data.query.pages\n            && response.data.query.pages[pageId]\n            && response.data.query.pages[pageId].extract) {\n          return response.data.query.pages[pageId].extract;\n        }\n        onError();\n      }\n\n      function onError() {\n        throwWikipediaAPIError(\"Description could not be retrieved\");\n      }\n    }\n\n    factory.getPageImagesList = function(pageId) {\n      return $http\n        .jsonp(buildPageImagesListQuery(pageId))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        var acceptedImageExtensions = ['bmp', 'eps', 'gif', 'jpeg', 'jpg',\n                                      'pcd', 'pct', 'pdf', 'pict', 'png',\n                                      'ps', 'psd', 'pub', 'svg', 'thm'];\n                                      \n        var blackListedImages = ['commons-logo.svg', 'ambox_scales.svg', 'ambox_current_red.svg',\n                                  'star_full.svg', 'star_empty.svg', 'searchtool.svg',\n                                  'crystal_clear_app_browser.png', 'padlock.svg', 'padlock-silver.svg',\n                                  'padlock-olive.svg', 'ambox_outdated_serious.svg', 'wikinews-logo.svg'];\n\n        if (response\n            && response.data\n            && response.data.query\n            && response.data.query.pages) {\n          var imageObjects = {};\n          angular.forEach(response.data.query.pages, function(page) {\n            if (page.imageinfo\n                && page.imageinfo.length > 0\n                && page.imageinfo[0].url\n                && page.imageinfo[0].width\n                && page.imageinfo[0].height) {\n              var url = page.imageinfo[0].url;\n              var width = page.imageinfo[0].width;\n              var height = page.imageinfo[0].height;\n              if (!imageObjects.hasOwnProperty(url)) {\n                if (100 <= width && width <= 1000 && 100 <= height && height <= 1000) {\n                  var urlLowerCase = url.toLowerCase();\n                  var isBlackListed = false;\n                  angular.forEach(blackListedImages, function(blackListedImage) {\n                    if (urlLowerCase.indexOf(blackListedImage) !== -1) {\n                      isBlackListed = true;\n                    }\n                  });\n                  if (!isBlackListed) {\n                    var extension = urlLowerCase.split('.').pop();\n                    if (acceptedImageExtensions.indexOf(extension) !== -1) {\n                      imageObjects[url] = {\n                        url: url,\n                        width: width,\n                        height: height\n                      };\n                    }\n                  }\n                }\n              }\n            }\n          });\n          var imageList = [];\n          angular.forEach(imageObjects, function(imageObject) {\n            imageList.push(imageObject);\n          })\n          return imageList;\n        }\n        onError();\n      }\n\n      function onError() {\n        throwWikipediaAPIError(\"Images list could not be retrieved\");\n      }\n    }\n\n    factory.getPageThumbnail = function(pageId) {\n      return $http\n        .jsonp(buildPageThumbnailQuery(pageId))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (response\n            && response.data\n            && response.data.query\n            && response.data.query.pages\n            && response.data.query.pages[pageId]\n            && response.data.query.pages[pageId].thumbnail\n            && response.data.query.pages[pageId].thumbnail.source) {\n          return response.data.query.pages[pageId].thumbnail.source;\n        }\n        onError();\n      }\n\n      function onError() {\n        throwWikipediaAPIError(\"Thumbnail could not be retrieved\");\n      }\n    }\n\n    factory.getPageTitle = function(pageId) {\n      return $http\n        .jsonp(buildPageBasicDataQuery(pageId))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (response\n            && response.data\n            && response.data.query\n            && response.data.query.pages\n            && response.data.query.pages[pageId]\n            && response.data.query.pages[pageId].title) {\n          return response.data.query.pages[pageId].title;\n        }\n        onError();\n      }\n\n      function onError() {\n        throwWikipediaAPIError(\"Title could not be retrieved\");\n      }\n    }\n\n    factory.search = function(query) {\n      return $http\n        .jsonp(buildSearchQuery(query))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (response\n            && response.data\n            && response.data.query\n            && response.data.query.search\n            && angular.isArray(response.data.query.search)) {\n          var results = response.data.query.search;\n          var pageIds = [], wrappedPromises = [];\n          angular.forEach(results, function(result) {\n            if (angular.isDefined(result.title)) {\n              var wrappedPromise = factory.getPageIdByTitle(result.title)\n                  .then(function(pageId) {\n                    return factory.getPageDescription(pageId)\n                        .then(function(pageDescription) {\n                          // TODO: improve disambiguation page detection logic.\n                          /* Only add if description is not too short. */\n                          if (pageDescription.length > 50) {\n                            pageIds.push(pageId);\n                          }\n                        });\n                  })\n                  .catch(function() {\n                    /* Skip if pageId cannot be retrieved. */\n                  });\n              wrappedPromises.push(wrappedPromise);\n            }\n          })\n          return $q.all(wrappedPromises).then(function() {\n            return pageIds;\n          });\n        }\n        onError();\n      }\n\n      function onError() {\n        throwWikipediaAPIError(\"Query results could not be retrieved\");\n      }\n    }\n\n    factory.getPageIdByTitle = function(title) {\n      return $http\n        .jsonp(buildPageIdByTitleQuery(title))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (response\n            && response.data\n            && response.data.query\n            && response.data.query.pages) {\n          var pageIdArray = Object.keys(response.data.query.pages);\n          if (pageIdArray.length > 0) {\n            return pageIdArray[0];\n          }\n        }\n        onError();\n      }\n\n      function onError() {\n        throwWikipediaAPIError(\"Page Id could not be retrieved\");\n      }\n    }\n\n    return factory;\n\n    function buildPageCategoriesQuery(pageId) {\n      var queryTemplate = '';\n      queryTemplate += 'https://{{wikipediaId}}.wikipedia.org/w/api.php?';\n      queryTemplate += '&pageids={{pageId}}';\n      queryTemplate += '&action=query';\n      queryTemplate += '&prop=categories';\n      queryTemplate += '&clshow=!hidden';\n      queryTemplate += '&format=json';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        wikipediaId: yaviConfig.wikipediaId,\n        pageId: pageId\n      });\n    }\n\n    function buildPageBasicDataQuery(pageId) {\n      var queryTemplate = '';\n      queryTemplate += 'https://{{wikipediaId}}.wikipedia.org/w/api.php?';\n      queryTemplate += '&pageids={{pageId}}';\n      queryTemplate += '&action=query';\n      queryTemplate += '&prop=extracts';\n      queryTemplate += '&exintro=';\n      queryTemplate += '&explaintext=';\n      queryTemplate += '&format=json';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        wikipediaId: yaviConfig.wikipediaId,\n        pageId: pageId\n      });\n    }\n\n    function buildPageImagesListQuery(pageId) {\n      var queryTemplate = '';\n      queryTemplate += 'https://{{wikipediaId}}.wikipedia.org/w/api.php?';\n      queryTemplate += '&pageids={{pageId}}';\n      queryTemplate += '&action=query';\n      queryTemplate += '&generator=images';\n      queryTemplate += '&prop=imageinfo';\n      queryTemplate += '&iiprop=url|dimensions';\n      queryTemplate += '&gimlimit=10';\n      queryTemplate += '&format=json';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        wikipediaId: yaviConfig.wikipediaId,\n        pageId: pageId\n      });\n    }\n\n    function buildPageThumbnailQuery(pageId) {\n      var queryTemplate = '';\n      queryTemplate += 'https://{{wikipediaId}}.wikipedia.org/w/api.php?';\n      queryTemplate += '&pageids={{pageId}}';\n      queryTemplate += '&action=query';\n      queryTemplate += '&prop=pageimages';\n      queryTemplate += '&pithumbsize=500';\n      queryTemplate += '&format=json';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        wikipediaId: yaviConfig.wikipediaId,\n        pageId: pageId\n      });\n    }\n\n    function buildSearchQuery(query) {\n      var queryTemplate = '';\n      queryTemplate += 'https://{{wikipediaId}}.wikipedia.org/w/api.php?';\n      queryTemplate += '&action=query';\n      queryTemplate += '&list=search';\n      queryTemplate += '&srsearch={{query}}';\n      queryTemplate += '&srnamespace=0';\n      queryTemplate += '&srwhat=text';\n      queryTemplate += '&srprop=size';\n      queryTemplate += '&indexpageids=';\n      queryTemplate += '&redirects=';\n      queryTemplate += '&srlimit=20';\n      queryTemplate += '&format=json';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        wikipediaId: yaviConfig.wikipediaId,\n        query: query\n      });\n    }\n\n    function buildPageIdByTitleQuery(title) {\n      var queryTemplate = '';\n      queryTemplate += 'https://{{wikipediaId}}.wikipedia.org/w/api.php?';\n      queryTemplate += '&titles={{title}}';\n      queryTemplate += '&action=query';\n      queryTemplate += '&format=json';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        wikipediaId: yaviConfig.wikipediaId,\n        title: title\n      });\n    }\n\n    function throwWikipediaAPIError(errorMessage) {\n      throw $interpolate(\"Wikipedia API: {{errorMessage}}.\")({errorMessage: errorMessage});\n    }\n  }\n  \n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .controller('PageNotFoundController', controllerFunction);\n\n  /** @ngInject */\n  function controllerFunction(yvPageTitleConfig, $state) {\n    var vm = this;\n\n    yvPageTitleConfig.setDefaultPageTitle();\n\n    vm.stateToHome = function() {\n      $state.go('home');\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .controller('HomeController', controllerFunction);\n\n  /** @ngInject */\n  function controllerFunction(yvPageTitleConfig, $stateParams) {\n    var vm = this;\n\n    //\n    yvPageTitleConfig.setDefaultPageTitle();\n\n    //\n    vm.query = {value: $stateParams.query};\n    vm.searchResults = {value: []};\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .controller('ExplorePageController', controllerFunction);\n\n  /** @ngInject */\n  function controllerFunction(wikipediaPages, $stateParams, yvPageTitleConfig, $state, $location) {\n    var vm = this;\n\n    if (!wikipediaPages.isValidId($stateParams.pageId)) {\n      $state.go('pageNotFound');\n    }\n\n    //\n    vm.page = wikipediaPages.getPageById($stateParams.pageId);\n    vm.period = {\n      startDate: $stateParams.startDate || '2014-01-01',\n      endDate: $stateParams.endDate || '2014-03-01'\n    };\n\n    vm.page.getTitle().then(function(title) {\n      yvPageTitleConfig.setPageTitle(title);\n    }).catch(function() {\n      $state.go('pageNotFound');\n    });\n\n    vm.absoluteURL = $location.absUrl();\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .value('yaviConfig', {\n      wikipediaId: 'en'\n    });\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock() {\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider, $locationProvider) {\n    $stateProvider\n      .state('home', {\n        url: '/',\n        params: {\n          query: null\n        },\n        templateUrl: 'app/home/home.html',\n        controller: 'HomeController',\n        controllerAs: 'vm'\n      });\n\n    $stateProvider\n      .state('explorePage', {\n        url: '/explorePage/:pageId',\n        params: {\n          startDate: null,\n          endDate: null\n        },\n        templateUrl: 'app/explore-page/explorePage.html',\n        controller: 'ExplorePageController',\n        controllerAs: 'vm'\n      });\n\n    $stateProvider\n      .state('pageNotFound', {\n        url: '/pageNotFound/',\n        templateUrl: 'app/page-not-found/pageNotFound.html',\n        controller: 'PageNotFoundController',\n        controllerAs: 'vm'\n      });\n\n    $urlRouterProvider.otherwise('/');\n\n    $locationProvider.html5Mode(true);\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .constant('wikipediaSources', [\n      {wikipediaId: 'en', flagId: 'gb', language: 'English'},\n      {wikipediaId: 'de', flagId: 'de', language: 'Deutsch'},\n      {wikipediaId: 'ja', flagId: 'jp', language: '日本語'},\n      {wikipediaId: 'ru', flagId: 'ru', language: 'Русский'},\n      {wikipediaId: 'es', flagId: 'es', language: 'Español'},\n      {wikipediaId: 'fr', flagId: 'fr', language: 'Français'},\n      {wikipediaId: 'it', flagId: 'it', language: 'Italiano'},\n      {wikipediaId: 'pt', flagId: 'pt', language: 'Português'},\n      {wikipediaId: 'zh', flagId: 'cn', language: '中文'},\n      {wikipediaId: 'pl', flagId: 'pl', language: 'Polski'}\n    ]);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, $httpProvider, $provide) {\n    // Logging enabled/disabled.\n    $logProvider.debugEnabled(true);\n    \n    // Cache all http requests.\n    $httpProvider.defaults.cache = true;\n\n    // Custom exception handling.\n    /** @ngInject */\n    $provide.decorator(\"$exceptionHandler\", function($log) {\n      return function(exception) {\n        $log.debug(exception);\n      };\n    });\n  }\n\n})();\n\nangular.module(\"yavi\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/explore-page/explorePage.html\",\"<div id=\\\"explore-page-wrapper\\\"><yv-explore-page-navbar page-id=\\\"vm.page.pageId\\\"></yv-explore-page-navbar><div id=\\\"explore-page-cards-wrapper-1\\\"><div id=\\\"explore-page-cards-wrapper-2\\\"><div id=\\\"explore-page-cards-wrapper-3\\\"><div id=\\\"explore-page-cards-left\\\"><yv-explore-page-main-card page-id=\\\"vm.page.pageId\\\" period=\\\"vm.period\\\"></yv-explore-page-main-card><yv-explore-page-related-pages-card page-id=\\\"vm.page.pageId\\\" period=\\\"vm.period\\\"></yv-explore-page-related-pages-card></div><div id=\\\"explore-page-cards-right\\\"><yv-explore-page-period-selector-card page-id=\\\"vm.page.pageId\\\" period=\\\"vm.period\\\"></yv-explore-page-period-selector-card><yv-explore-page-signals-card page-id=\\\"vm.page.pageId\\\" period=\\\"vm.period\\\"></yv-explore-page-signals-card><yv-explore-page-popularity-card page-id=\\\"vm.page.pageId\\\" period=\\\"vm.period\\\"></yv-explore-page-popularity-card></div></div></div></div></div>\");\n$templateCache.put(\"app/home/home.html\",\"<div id=\\\"home-wrapper\\\"><yv-home-navbar></yv-home-navbar><yv-home-imagetype></yv-home-imagetype><yv-home-search-box yv-scroll-on-click=\\\"\\\"></yv-home-search-box><yv-home-search-results></yv-home-search-results></div>\");\n$templateCache.put(\"app/page-not-found/pageNotFound.html\",\"<div id=\\\"page-not-found-wrapper\\\"><yv-page-not-found-navbar></yv-page-not-found-navbar><div id=\\\"page-not-found-content\\\" ng-click=\\\"vm.stateToHome()\\\"><h1 id=\\\"page-not-found-header\\\">Sorry, something went wrong...<hr><small>Click <em>here</em> to go back</small></h1><div id=\\\"page-not-found-isotype\\\"></div></div></div>\");\n$templateCache.put(\"app/explore-page/yv-explore-page-navbar/yvExplorePageNavbar.html\",\"<div id=\\\"explore-page-navbar-wrapper\\\"><nav class=\\\"navbar navbar-default\\\"><div class=\\\"container-fluid\\\"><div class=\\\"navbar-header\\\"><button type=\\\"button\\\" class=\\\"navbar-toggle\\\" ng-click=\\\"vm.toggleNavbarMenu()\\\" aria-expanded=\\\"false\\\"><span class=\\\"sr-only\\\">Toggle navigation</span> <span class=\\\"icon-bar\\\"></span> <span class=\\\"icon-bar\\\"></span> <span class=\\\"icon-bar\\\"></span></button> <a class=\\\"navbar-brand\\\" href=\\\"#\\\" ng-click=\\\"vm.stateToHome()\\\"><img id=\\\"isotype\\\" src=\\\"/yavi/web/dist/assets/images/isotype-small.png\\\" alt=\\\"Yavi\\\"></a></div><div class=\\\"collapse navbar-collapse\\\" collapse=\\\"collapsed\\\" uib-collapse=\\\"vm.navbarMenuIsCollapsed\\\"><ul class=\\\"nav navbar-nav navbar-right\\\"><li><a href=\\\"#\\\">Home</a></li><li class=\\\"dropdown\\\" uib-dropdown=\\\"\\\"><a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle=\\\"\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">Settings <span class=\\\"caret\\\"></span></a><ul class=\\\"dropdown-menu\\\" uib-dropdown-menu=\\\"\\\" role=\\\"menu\\\"><li><a href=\\\"#\\\">Action</a></li><li><a href=\\\"#\\\">Another action</a></li><li><a href=\\\"#\\\">Something else here</a></li><li role=\\\"separator\\\" class=\\\"divider\\\"></li><li><a href=\\\"#\\\">Separated link</a></li><li role=\\\"separator\\\" class=\\\"divider\\\"></li><li><a href=\\\"#\\\">One more separated link</a></li></ul></li></ul><form class=\\\"navbar-form navbar-left\\\" role=\\\"search\\\"><div class=\\\"form-group\\\"><div class=\\\"input-group\\\"><input id=\\\"explore-page-search-box-input\\\" type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"vm.searchBoxInput\\\" ng-change=\\\"vm.onChange()\\\" placeholder=\\\"Search for a Wikipedia page...\\\" autocomplete=\\\"off\\\" autofocus=\\\"\\\"><div class=\\\"input-group-btn\\\"><button id=\\\"explore-page-search-box-button\\\" type=\\\"submit\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"vm.onSubmit()\\\"><span class=\\\"glyphicon glyphicon-search\\\" aria-hidden=\\\"true\\\"></span></button></div></div></div></form></div></div></nav></div>\");\n$templateCache.put(\"app/explore-page/yv-explore-page-main-card/yvExplorePageMainCard.html\",\"<div id=\\\"explore-page-main-card-wrapper\\\"><div id=\\\"main-card-panel\\\"><div id=\\\"main-card-panel-heading\\\" uib-tooltip=\\\"General Information\\\" tooltip-placement=\\\"bottom-right\\\"><h3 id=\\\"main-card-panel-title\\\"><span class=\\\"glyphicon glyphicon-globe\\\" aria-hidden=\\\"true\\\"></span></h3></div><div id=\\\"main-card-panel-body\\\"><div id=\\\"main-card-panel-body-left\\\"><h2 id=\\\"page-title\\\"></h2><hr><div id=\\\"page-images-carrousel\\\"><uib-carousel no-wrap=\\\"vm.carrouselNoWrap\\\"><uib-slide ng-repeat=\\\"slide in vm.carrouselSlides\\\" active=\\\"slide.active\\\" index=\\\"slide.id\\\"><img ng-src=\\\"{{slide.image}}\\\"><div class=\\\"carousel-caption\\\"></div></uib-slide></uib-carousel></div><div id=\\\"page-description\\\"></div></div><div id=\\\"main-card-panel-body-right\\\"><ul id=\\\"page-category-list\\\"></ul><a id=\\\"page-wikipedia-link\\\" target=\\\"_blank\\\" href=\\\"#\\\">Wikipedia</a> <a id=\\\"page-google-link\\\" target=\\\"_blank\\\" href=\\\"#\\\">Google</a></div></div></div></div>\");\n$templateCache.put(\"app/explore-page/yv-explore-page-period-selector-card/yvExplorePagePeriodSelectorCard.html\",\"<div id=\\\"explore-page-period-selector-card-wrapper\\\"><div id=\\\"period-selector-card-panel\\\"><div id=\\\"period-selector-card-panel-heading\\\" uib-tooltip=\\\"Period selection\\\" tooltip-placement=\\\"bottom-right\\\"><h3 id=\\\"period-selector-card-panel-title\\\"><span class=\\\"glyphicon glyphicon-calendar\\\" aria-hidden=\\\"true\\\"></span></h3></div><div id=\\\"period-selector-card-panel-body\\\"><div class=\\\"row\\\"><div class=\\\"col-xs-12 col-sm-8\\\"><h5>Select period of interest:</h5></div><div class=\\\"col-xs-12 col-sm-4\\\"><input date-range-picker=\\\"\\\" class=\\\"form-control date-picker\\\" type=\\\"text\\\" ng-model=\\\"vm.datePicker.date\\\" options=\\\"{eventHandlers: {\\'apply.daterangepicker\\': vm.onApply}}\\\"></div></div></div></div></div>\");\n$templateCache.put(\"app/explore-page/yv-explore-page-popularity-card/yvExplorePagePopularityCard.html\",\"<div id=\\\"explore-page-popularity-card-wrapper\\\"><div id=\\\"popularity-card-panel\\\"><div id=\\\"popularity-card-panel-heading\\\" uib-tooltip=\\\"Compared Popularity\\\" tooltip-placement=\\\"bottom-right\\\"><h3 id=\\\"popularity-card-panel-title\\\"><span class=\\\"glyphicon glyphicon-fire\\\" aria-hidden=\\\"true\\\"></span></h3></div><div id=\\\"popularity-card-panel-body\\\"><canvas id=\\\"radar\\\" class=\\\"chart chart-radar\\\" chart-data=\\\"vm.radarData\\\" chart-labels=\\\"vm.radarLabels\\\"></canvas></div></div></div>\");\n$templateCache.put(\"app/explore-page/yv-explore-page-related-pages-card/yvExplorePageRelatedPagesCard.html\",\"<div id=\\\"explore-page-related-pages-card-wrapper\\\"><div id=\\\"related-pages-card-panel\\\"><div id=\\\"related-pages-card-panel-heading\\\" uib-tooltip=\\\"Related Pages\\\" tooltip-placement=\\\"bottom-right\\\"><h3 id=\\\"related-pages-card-panel-title\\\"><span class=\\\"glyphicon glyphicon-duplicate\\\" aria-hidden=\\\"true\\\"></span></h3></div><div id=\\\"related-pages-card-panel-body\\\"><yv-related-pages-bubble-chart page-id=\\\"vm.page.pageId\\\" period=\\\"vm.period\\\"></yv-related-pages-bubble-chart></div></div></div>\");\n$templateCache.put(\"app/explore-page/yv-explore-page-signals-card/yvExplorePageSignalsCard.html\",\"<div id=\\\"explore-page-signals-card-wrapper\\\"><div id=\\\"signals-card-panel\\\"><div id=\\\"signals-card-panel-heading\\\" uib-tooltip=\\\"Popularity Signals\\\" tooltip-placement=\\\"bottom-right\\\"><h3 id=\\\"signals-card-panel-title\\\"><span class=\\\"glyphicon glyphicon-equalizer\\\" aria-hidden=\\\"true\\\"></span></h3></div><div id=\\\"signals-card-panel-body\\\"><uib-tabset stacked=\\\"true\\\"><uib-tab heading=\\\"Revisions\\\" select=\\\"vm.onSelect(\\'number-of-revisions\\')\\\"><div id=\\\"chart-number-of-revisions\\\" style=\\\"width:100%;height:500px;\\\"></div></uib-tab><uib-tab heading=\\\"Page Content Size\\\" select=\\\"vm.onSelect(\\'page-content-size\\')\\\"><div id=\\\"chart-page-content-size\\\" style=\\\"width:100%;height:500px;\\\"></div></uib-tab></uib-tabset></div></div></div>\");\n$templateCache.put(\"app/home/yv-home-imagetype/yvHomeImagetype.html\",\"<div id=\\\"home-imagetype-wrapper\\\"><img id=\\\"imagetype\\\" src=\\\"/yavi/web/dist/assets/images/imagetype.png\\\" alt=\\\"Yavi - Visualize Wikipedia\\\"></div>\");\n$templateCache.put(\"app/home/yv-home-navbar/yvHomeNavbar.html\",\"<div id=\\\"home-navbar-wrapper\\\"><nav class=\\\"navbar navbar-default\\\"><div class=\\\"container-fluid\\\"><div class=\\\"navbar-header\\\"><button type=\\\"button\\\" class=\\\"navbar-toggle\\\" ng-click=\\\"vm.toggleNavbarMenu()\\\" aria-expanded=\\\"false\\\"><span class=\\\"sr-only\\\">Toggle navigation</span> <span class=\\\"icon-bar\\\"></span> <span class=\\\"icon-bar\\\"></span> <span class=\\\"icon-bar\\\"></span></button> <a class=\\\"navbar-brand\\\" href=\\\"#\\\"><img id=\\\"isotype\\\" src=\\\"/yavi/web/dist/assets/images/isotype-small.png\\\" alt=\\\"Yavi\\\"></a></div><div class=\\\"collapse navbar-collapse\\\" uib-collapse=\\\"vm.navbarMenuIsCollapsed\\\"><ul class=\\\"nav navbar-nav navbar-right\\\"><li><a href=\\\"#\\\">About</a></li><li><a href=\\\"#\\\">Contact</a></li><li class=\\\"dropdown\\\" uib-dropdown=\\\"\\\"><a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle=\\\"\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">Wikipedia Source <span class=\\\"flag-icon flag-icon-{{vm.activeWikipediaSource.flagId}}\\\"></span> <span class=\\\"caret\\\"></span></a><ul class=\\\"dropdown-menu\\\" uib-dropdown-menu=\\\"\\\" role=\\\"menu\\\"><li ng-repeat=\\\"wikipediaSource in vm.wikipediaSources\\\"><a href=\\\"#\\\" ng-click=\\\"vm.selectWikipediaSource(wikipediaSource.wikipediaId)\\\"><span class=\\\"flag-icon flag-icon-{{wikipediaSource.flagId}}\\\"></span> {{wikipediaSource.language}}</a></li></ul></li></ul></div></div></nav></div>\");\n$templateCache.put(\"app/home/yv-home-search-box/yvHomeSearchBox.html\",\"<div id=\\\"home-search-box-wrapper\\\"><form class=\\\"form-horizontal\\\"><div class=\\\"form-group\\\"><div class=\\\"input-group\\\"><input id=\\\"home-search-box-input\\\" type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"vm.query.value\\\" ng-change=\\\"vm.onChange()\\\" ng-model-options=\\\"{debounce:vm.searchBoxInputDebounce}\\\" placeholder=\\\"Search for a Wikipedia page...\\\" autocomplete=\\\"off\\\" autofocus=\\\"\\\"><div class=\\\"input-group-btn\\\"><button id=\\\"home-search-box-button\\\" type=\\\"submit\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"vm.onSubmit()\\\"><span class=\\\"glyphicon glyphicon-search\\\" aria-hidden=\\\"true\\\"></span></button></div></div></div></form><div id=\\\"home-search-box-loading\\\" ng-show=\\\"vm.searchOngoing\\\"></div></div>\");\n$templateCache.put(\"app/home/yv-home-search-results/yvHomeSearchResults.html\",\"<div id=\\\"home-search-results-wrapper\\\"><yv-home-search-results-card ng-repeat=\\\"pageId in vm.searchResults.value | limitTo: 11\\\"></yv-home-search-results-card></div>\");\n$templateCache.put(\"app/page-not-found/yv-page-not-found-navbar/yvPageNotFoundNavbar.html\",\"<div id=\\\"page-not-found-navbar-wrapper\\\"><nav class=\\\"navbar navbar-default\\\"><div class=\\\"container-fluid\\\"><div class=\\\"navbar-header\\\"><a class=\\\"navbar-brand\\\" href=\\\"#\\\" ng-click=\\\"vm.stateToHome()\\\"><img id=\\\"isotype\\\" src=\\\"/yavi/web/dist/assets/images/isotype-small.png\\\" alt=\\\"Yavi\\\"></a></div></div></nav></div>\");\n$templateCache.put(\"app/explore-page/yv-explore-page-related-pages-card/yv-related-pages-bubble-chart/yvRelatedPagesBubbleChart.html\",\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:ev=\\\"http://www.w3.org/2001/xml-events\\\" width=\\\"0\\\" height=\\\"0\\\"><defs><pattern id=\\\"image1\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image2\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image3\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image4\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image5\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image6\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image7\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image8\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image9\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image10\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern></defs></svg><div id=\\\"bubble-chart\\\"></div>\");\n$templateCache.put(\"app/home/yv-home-search-results/yv-home-search-results-card/yvHomeSearchResultsCard.html\",\"<div class=\\\"home-search-results-card-wrapper\\\"><div class=\\\"card\\\" ng-click=\\\"vm.onCardClick()\\\"><div class=\\\"card-body\\\"><div class=\\\"card-body-left\\\"><div class=\\\"page-thumbnail\\\"></div></div><div class=\\\"card-body-right\\\"><div class=\\\"card-text\\\"><h4 class=\\\"page-title\\\"></h4><hr><p class=\\\"page-description\\\"></p></div></div></div><div class=\\\"card-footer\\\"><ul class=\\\"page-category-list\\\"></ul></div></div></div>\");}]);"],"sourceRoot":"/source/"}
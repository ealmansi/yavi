{"version":3,"sources":["scripts/app-7976c7f452.js"],"names":["angular","module","directiveFunction","wikipediaPages","$q","$location","$state","$interpolate","controllerFunction","$scope","$rootScope","vm","this","isValidId","pageId","page","getPageById","period","periodSelectionWatch","$on","event","newPeriod","startDate","endDate","onPeriodSelection","linkFunction","scope","makeChart","chartData","d3","svg","BubbleChart","supportResponsive","container","size","innerRadius","radiusMin","data","plugins","name","options","text","style","font-size","font-style","font-family","text-anchor","fill","attr","dy","centralClick","item","go","format","textField","classed","x","d","cx","y","cy","count","centralFormat","element","empty","getRelatedPages","then","relatedPages","classedFunction","itemClassTemplate","buildEvalFunction","maxScore","score","items","wrappedPromises","forEach","pageIdScore","isDefined","relatedPage","wrappedPromise","getTitle","title","push","all","length","Math","max","sort","itemA","itemB","scoreDifference","reverse","itemRanking","eval","directive","controller","controllerAs","link","restrict","templateUrl","$inject","onCardClick","getThumbnail","thumbnail","backgroundImageTemplate","find","css","html","getDescription","description","pageDescriptionElement","dotdotdot","ellipsis","getCategoryList","categoryList","listElement","itemElementTemplate","category","append","stateToHome","$log","$timeout","dateValueComparator","dateValueA","dateValueB","dateTimeA","Date","date","getTime","dateTimeB","dateCompare","value","divId","dataList","renderedListener","chart","zoomToIndexes","dataProvider","zoomedListener","AmCharts","type","theme","marginRight","marginLeft","autoMarginOffset","dataDateFormat","valueAxes","id","axisAlpha","position","ignoreAxisWidth","balloon","borderThickness","shadowAlpha","graphs","drop","adjustBorderColor","color","bullet","bulletBorderAlpha","bulletColor","bulletSize","hideBulletsCount","lineThickness","useLineColorForBulletBorder","valueField","balloonText","chartScrollbar","graph","oppositeAxis","offset","scrollbarHeight","backgroundAlpha","selectedBackgroundAlpha","selectedBackgroundColor","graphFillAlpha","graphLineAlpha","selectedGraphFillAlpha","selectedGraphLineAlpha","autoGridCount","chartCursor","pan","valueLineEnabled","valueLineBalloonEnabled","cursorAlpha","cursorColor","limitToGraph","valueLineAlpha","valueScrollbar","categoryField","categoryAxis","parseDates","dashLength","minorGridEnabled","export","enabled","invalidateSize","addListener","zoomedListenerTimer","undefined","cancel","numberOfAddedInlinksChart","numberOfAddedOutlinksChart","numberOfRevertedRevisionsChart","numberOfRevisionsChart","numberOfTotalOutlinksChart","numberOfUniqueEditorsChart","pageContentSizeChart","activeTab","onSelect","tabId","makeChartNumberOfAddedInlinks","makeChartNumberOfAddedOutlinks","makeChartNumberOfRevertedRevisions","makeChartNumberOfRevisions","makeChartNumberOfTotalOutlinks","makeChartNumberOfUniqueEditors","makeChartPageContentSize","getNumberOfAddedInlinksList","numberOfAddedInlinksList","getNumberOfAddedOutlinksList","numberOfAddedOutlinksList","getNumberOfRevertedRevisionsList","numberOfRevertedRevisionsList","getNumberOfRevisionsList","numberOfRevisionsList","getNumberOfTotalOutlinksList","numberOfTotalOutlinksList","getNumberOfUniqueEditorsList","numberOfUniqueEditorsList","getPageContentSizeList","pageContentSizeList","radarLabels","radarData","lineLabels","lineSeries","lineData","datePicker","onApply","$emit","navbarMenuIsCollapsed","searchBoxInput","onChange","onSubmit","query","toggleNavbarMenu","yaviConfig","wikipediaSources","getWikipediaSourceById","wikipediaId","matchingWikipediaSource","wikipediaSource","carrouselSlides","image","carrouselNoWrap","activeWikipediaSource","getImagesList","imagesList","imageA","imageB","width","height","imageId","url","pageWikipediaLinkElement","pageWikipediaLinkTemplate","pageGoogleLinkElement","searchResults","$parent","$anchorScroll","wikipediaAPI","searchBoxInputDebounce","searchOngoing","onChangeTimerCurrent","onChangeTimerAtSearch","search","focus","selectWikipediaSource","current","reload","inherit","on","animate","scrollTop","top","factoryFunction","getPageTitleFunction","pageTitleTemplate","pageTitle","setPageTitleFunction","newPageTitle","setDefaultPageTitleFunction","defaultPageTitle","getPageTitle","setPageTitle","setDefaultPageTitle","factory","yvPageTitleConfig","$watch","template","$http","buildPageSignalQuery","signalType","dateFrom","dateTo","queryTemplate","buildPageRelatedPagesQuery","throwYaviServerError","errorMessage","getPageSignal","onSuccess","response","onError","jsonp","getPageRelatedPages","WikipediaPage","pages","pageIdInteger","parseInt","pageIdArg","hasOwnProperty","serviceFunction","yaviServer","self","isUndefined","getPageCategories","val","when","getPageDescription","getPageImagesList","getPageThumbnail","service","buildPageCategoriesQuery","buildPageBasicDataQuery","buildPageImagesListQuery","buildPageThumbnailQuery","buildSearchQuery","buildPageIdByTitleQuery","throwWikipediaAPIError","categories","categoryTitles","categoryTitle","categoryTitleNoPrefix","substr","indexOf","extract","acceptedImageExtensions","blackListedImages","imageObjects","imageinfo","urlLowerCase","toLowerCase","isBlackListed","blackListedImage","extension","split","pop","imageList","imageObject","source","isArray","results","pageIds","result","getPageIdByTitle","pageDescription","pageIdArray","Object","keys","$stateParams","absoluteURL","absUrl","runBlock","run","routerConfig","$stateProvider","$urlRouterProvider","$locationProvider","state","params","otherwise","html5Mode","config","constant","flagId","language","$logProvider","$httpProvider","$provide","debugEnabled","defaults","cache","decorator","exception","debug","$templateCache","put"],"mappings":"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","file":"scripts/app-7976c7f452.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('yavi', [\n      'chart.js',\n      'daterangepicker',\n      'ngAnimate',\n      'ngAria',\n      'ngCookies',\n      'ngMessages',\n      'ngResource',\n      'ngSanitize',\n      'ngTouch',\n      'toastr',\n      'ui.bootstrap',\n      'ui.router'\n    ]);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvRelatedPagesBubbleChart', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction(wikipediaPages, $q, $location, $state, $interpolate) {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      link: linkFunction,\n      restrict: 'E',\n      scope: {\n        'pageId': '=',\n        'period': '='\n      },\n      templateUrl: 'app/explore-page/yv-explore-page-related-pages-card/yv-related-pages-bubble-chart/yvRelatedPagesBubbleChart.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction(wikipediaPages, $scope, $rootScope) {\n      var vm = this;\n      \n      // Check if page id is valid.\n      if (!wikipediaPages.isValidId($scope.pageId)) {\n        return;\n      }\n      \n      // Get page and period.\n      vm.page = wikipediaPages.getPageById($scope.pageId);\n      vm.period = $scope.period;\n\n      var periodSelectionWatch = $rootScope.$on('periodSelection', function(event, newPeriod) {\n        vm.period.startDate = newPeriod.startDate;\n        vm.period.endDate = newPeriod.endDate;\n        onPeriodSelection(vm.page, vm.period.startDate, vm.period.endDate);\n      });\n\n      $scope.$on('$destroy', periodSelectionWatch);\n    }\n\n    function linkFunction(scope) {\n      onPeriodSelection(scope.vm.page, scope.vm.period.startDate, scope.vm.period.endDate);\n    }\n\n    function onPeriodSelection(page, startDate, endDate) {\n      angular.element(\"#bubble-chart\").empty();\n      page.getRelatedPages(startDate, endDate).then(function(relatedPages) {\n        var items = [], wrappedPromises = [];\n        angular.forEach(relatedPages, function(pageIdScore) {\n          if (angular.isDefined(pageIdScore)\n              && angular.isDefined(pageIdScore.pageId)\n              && angular.isDefined(pageIdScore.score)) {\n            var pageId = pageIdScore.pageId;\n            var score = pageIdScore.score;\n            var relatedPage = wikipediaPages.getPageById(pageId);\n            var wrappedPromise = relatedPage.getTitle()\n                .then(function(title) {\n                  items.push({\n                    pageId: pageId,\n                    text: title,\n                    score: score\n                  });\n                })\n                .catch(function() {\n                  /* Skip if title cannot be retrieved. */\n                });\n            wrappedPromises.push(wrappedPromise);\n          }\n        });\n\n        $q.all(wrappedPromises).then(function() {\n          if (items.length > 0) {\n            var maxScore = 0;\n            angular.forEach(items, function(item) {\n              maxScore = Math.max(maxScore, item.score);\n            });\n\n            items.sort(function(itemA, itemB) {\n              var scoreDifference = itemA.score - itemB.score;\n              if (scoreDifference != 0) {\n                return scoreDifference;\n              }\n              return itemA.pageId - itemB.pageId;\n            });\n            items.reverse();\n\n            var itemRanking = 1;\n            angular.forEach(items, function(item) {\n              item.count = itemRanking;\n              itemRanking += 1;\n            });\n\n            makeChart({\n                classed: classedFunction,\n                eval: buildEvalFunction(maxScore),\n                items: items\n            }, startDate, endDate);\n            \n            // var absUrl = $location.absUrl();\n            // angular.forEach(items, function(item) {\n            //   var page = wikipediaPages.getPageById(item.pageId);\n            //   var circleElement = element.find('.' + classedFunction(item) + ' > circle');\n            //   circleElement.attr('style', 'fill: url(' + absUrl + '#image' + item.count + ')');\n            //   page.getThumbnail().then(function(thumbnail) {\n            //     element.find('#image' + item.count + ' > image').attr('xlink:href', thumbnail);\n            //   });\n            // });\n            \n          }\n        });\n        \n        function classedFunction(item) {\n          var itemClassTemplate = 'related-page-{{pageId}}';\n          return $interpolate(itemClassTemplate)({pageId: item.pageId});\n        }\n\n        function buildEvalFunction(maxScore) {\n          return function evalFunction(item) {\n            if (maxScore > 0) {\n              return 100 * item.score / maxScore;\n            } else {\n              return 1;\n            }\n            return item.score;\n          }\n        }\n      });\n\n      function makeChart(chartData, startDate, endDate) {\n        new d3.svg.BubbleChart({\n          supportResponsive: true,\n          container: '#bubble-chart',\n          size: 600,\n          //viewBoxSize: => use @default\n          innerRadius: 600 / 3.5,\n          //outerRadius: => use @default\n          radiusMin: 50,\n          //radiusMax: use @default\n          //intersectDelta: use @default\n          //intersectInc: use @default\n          //circleColor: use @default\n          data: chartData,\n          plugins: [\n            {\n              name: \"central-click\",\n              options: {\n                text: \"(See more detail)\",\n                style: {\n                  \"font-size\": \"12px\",\n                  \"font-style\": \"italic\",\n                  \"font-family\": \"Source Sans Pro, sans-serif\",\n                  //\"font-weight\": \"700\",\n                  \"text-anchor\": \"middle\",\n                  \"fill\": \"black\"\n                },\n                attr: {dy: \"65px\"},\n                centralClick: function(item) {\n                  $state.go('explorePage', {\n                    pageId: item.pageId,\n                    startDate: startDate,\n                    endDate: endDate\n                  });\n                }\n              }\n            },\n            {\n              name: \"lines\",\n              options: {\n                format: [\n                  {// Line #0\n                    textField: \"text\",\n                    classed: {text: true},\n                    style: {\n                      \"font-size\": \"24px\",\n                      \"font-family\": \"Source Sans Pro, sans-serif\",\n                      \"text-anchor\": \"middle\",\n                      fill: \"black\"\n                    },\n                    attr: {\n                      dy: \"0px\",\n                      x: function (d) {return d.cx;},\n                      y: function (d) {return d.cy;}\n                    }\n                  },\n                  {// Line #1\n                    textField: \"count\",\n                    classed: {count: true},\n                    style: {\n                      \"font-size\": \"14px\",\n                      \"font-family\": \"Source Sans Pro, sans-serif\",\n                      \"text-anchor\": \"middle\",\n                      fill: \"black\"\n                    },\n                    attr: {\n                      dy: \"20px\",\n                      x: function (d) {return d.cx;},\n                      y: function (d) {return d.cy;}\n                    }\n                  }\n                ],\n                centralFormat: [\n                  {// Line #0\n                    style: {\"font-size\": \"50px\"},\n                    attr: {}\n                  },\n                  {// Line #1\n                    style: {\"font-size\": \"30px\"},\n                    attr: {dy: \"40px\"}\n                  }\n                ]\n              }\n            }]\n        });\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvHomeSearchResultsCard', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction($interpolate) {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      link: linkFunction,\n      restrict: 'E',\n      scope: true,\n      templateUrl: 'app/home/yv-home-search-results/yv-home-search-results-card/yvHomeSearchResultsCard.html'\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function controllerFunction(wikipediaPages, $scope, $state) {\n      var vm = this;\n\n      vm.page = wikipediaPages.getPageById($scope.pageId);\n\n      vm.onCardClick = function() {\n        $state.go('explorePage', {\n          pageId: vm.page.pageId\n        });\n      }\n    }\n\n    function linkFunction(scope, element) {\n      scope.vm.page.getThumbnail().then(function(thumbnail) {\n        var backgroundImageTemplate = \"url('{{ thumbnail }}')\";\n        element.find('.page-thumbnail')\n            .css('background-image', $interpolate(backgroundImageTemplate)({\n              thumbnail: thumbnail\n            }));\n      });\n\n      scope.vm.page.getTitle().then(function(title) {\n        element.find('.page-title')\n            .html(title);\n      });\n      \n      scope.vm.page.getDescription().then(function(description) {\n        var pageDescriptionElement = element.find('.page-description');\n        pageDescriptionElement.html(description);\n        pageDescriptionElement.dotdotdot({\n          ellipsis: ' ...'\n        });\n      });\n\n      scope.vm.page.getCategoryList().then(function(categoryList) {\n        var listElement = element.find('.page-category-list');\n        var itemElementTemplate = '<li class=\"page-category-item\">{{ category }}</li>';\n        angular.forEach(categoryList, function(category) {\n          listElement.append($interpolate(itemElementTemplate)({\n            category: category\n          }));\n        });\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvPageNotFoundNavbar', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: true,\n      templateUrl: 'app/page-not-found/yv-page-not-found-navbar/yvPageNotFoundNavbar.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction($state) {\n      var vm = this;\n\n      vm.stateToHome = function() {\n        $state.go('home');\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvExplorePageSignalsCard', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction(wikipediaPages, $log) {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: {\n        pageId: '=',\n        period: '='\n      },\n      templateUrl: 'app/explore-page/yv-explore-page-signals-card/yvExplorePageSignalsCard.html'\n    };\n\n    return directive;\n  \n    /** @ngInject */\n    function controllerFunction($scope, $rootScope, $timeout) {\n      var vm = this;\n\n      //\n      var zoomedListenerTimer = undefined;\n      $scope.$on('$destroy', function() {\n        if (angular.isDefined(zoomedListenerTimer)) {\n          $timeout.cancel(zoomedListenerTimer);\n        }\n      });\n\n      //\n      vm.numberOfAddedInlinksChart = undefined;\n      vm.numberOfAddedOutlinksChart = undefined;\n      vm.numberOfRevertedRevisionsChart = undefined;\n      vm.numberOfRevisionsChart = undefined;\n      vm.numberOfTotalOutlinksChart = undefined;\n      vm.numberOfUniqueEditorsChart = undefined;\n      vm.pageContentSizeChart = undefined;\n\n      // Check if page id is valid.\n      if (!wikipediaPages.isValidId($scope.pageId)) {\n        return;\n      }\n      \n      // Get page and period.\n      vm.page = wikipediaPages.getPageById($scope.pageId);\n      vm.period = $scope.period;\n\n      var startDate = vm.period.startDate, endDate = vm.period.endDate;\n      var activeTab = undefined;\n      vm.onSelect = function(tabId) {\n        activeTab = tabId;\n        switch (activeTab) {\n        case 'number-of-added-inlinks':\n          vm.makeChartNumberOfAddedInlinks(startDate, endDate);\n          break;\n        case 'number-of-added-outlinks':\n          vm.makeChartNumberOfAddedOutlinks(startDate, endDate);\n          break;\n        case 'number-of-reverted-revisions':\n          vm.makeChartNumberOfRevertedRevisions(startDate, endDate);\n          break;\n        case 'number-of-revisions':\n          vm.makeChartNumberOfRevisions(startDate, endDate);\n          break;\n        case 'number-of-total-outlinks':\n          vm.makeChartNumberOfTotalOutlinks(startDate, endDate);\n          break;\n        case 'number-of-unique-editors':\n          vm.makeChartNumberOfUniqueEditors(startDate, endDate);\n          break;\n        case 'page-content-size':\n          vm.makeChartPageContentSize(startDate, endDate);\n          break;\n        default:\n          break;\n        }\n      }\n\n      var periodSelectionWatch = $rootScope.$on('periodSelection', function(event, period) {\n        startDate = period.startDate;\n        endDate = period.endDate;\n        vm.onSelect(activeTab);\n      });\n\n      $scope.$on('$destroy', periodSelectionWatch);\n      \n      vm.makeChartNumberOfAddedInlinks = function(startDate, endDate) {\n          vm.page.getNumberOfAddedInlinksList(startDate, endDate)\n              .then(function(numberOfAddedInlinksList) {\n                  numberOfAddedInlinksList.sort(dateValueComparator);\n                  vm.numberOfAddedInlinksChart = makeChart('chart-number-of-added-inlinks',\n                      numberOfAddedInlinksList);\n              });\n      }\n      \n      vm.makeChartNumberOfAddedOutlinks = function(startDate, endDate) {\n          vm.page.getNumberOfAddedOutlinksList(startDate, endDate)\n              .then(function(numberOfAddedOutlinksList) {\n                  numberOfAddedOutlinksList.sort(dateValueComparator);\n                  vm.numberOfAddedOutlinksChart = makeChart('chart-number-of-added-outlinks',\n                      numberOfAddedOutlinksList);\n              });\n      }\n      \n      vm.makeChartNumberOfRevertedRevisions = function(startDate, endDate) {\n          vm.page.getNumberOfRevertedRevisionsList(startDate, endDate)\n              .then(function(numberOfRevertedRevisionsList) {\n                  numberOfRevertedRevisionsList.sort(dateValueComparator);\n                  vm.numberOfRevertedRevisionsChart = makeChart('chart-number-of-reverted-revisions',\n                      numberOfRevertedRevisionsList);\n              });\n      }\n      \n      vm.makeChartNumberOfRevisions = function(startDate, endDate) {\n          vm.page.getNumberOfRevisionsList(startDate, endDate)\n              .then(function(numberOfRevisionsList) {\n                  numberOfRevisionsList.sort(dateValueComparator);\n                  vm.numberOfRevisionsChart = makeChart('chart-number-of-revisions',\n                      numberOfRevisionsList);\n              });\n      }\n      \n      vm.makeChartNumberOfTotalOutlinks = function(startDate, endDate) {\n          vm.page.getNumberOfTotalOutlinksList(startDate, endDate)\n              .then(function(numberOfTotalOutlinksList) {\n                  numberOfTotalOutlinksList.sort(dateValueComparator);\n                  vm.numberOfTotalOutlinksChart = makeChart('chart-number-of-total-outlinks',\n                      numberOfTotalOutlinksList);\n              });\n      }\n      \n      vm.makeChartNumberOfUniqueEditors = function(startDate, endDate) {\n          vm.page.getNumberOfUniqueEditorsList(startDate, endDate)\n              .then(function(numberOfUniqueEditorsList) {\n                  numberOfUniqueEditorsList.sort(dateValueComparator);\n                  vm.numberOfUniqueEditorsChart = makeChart('chart-number-of-unique-editors',\n                      numberOfUniqueEditorsList);\n              });\n      }\n      \n      vm.makeChartPageContentSize = function(startDate, endDate) {\n          vm.page.getPageContentSizeList(startDate, endDate)\n              .then(function(pageContentSizeList) {\n                  pageContentSizeList.sort(dateValueComparator);\n                  vm.pageContentSizeChart = makeChart('chart-page-content-size',\n                      pageContentSizeList);\n              });\n      }\n\n      function dateValueComparator(dateValueA, dateValueB) {\n        var dateTimeA = new Date(dateValueA.date).getTime();\n        var dateTimeB = new Date(dateValueB.date).getTime();\n        var dateCompare = dateTimeA - dateTimeB;\n        if (dateCompare != 0) {\n          return dateCompare;\n        } else {\n          return dateValueA.value - dateValueB.value;\n        }\n      }\n\n      function makeChart(divId, dataList) {\n        angular.element('#' + divId).empty();\n        var chart = AmCharts.makeChart(divId, {\n          \"type\": \"serial\",\n          \"theme\": \"light\",\n          \"marginRight\": 40,\n          \"marginLeft\": 40,\n          \"autoMarginOffset\": 20,\n          \"dataDateFormat\": \"YYYY-MM-DD\",\n          \"valueAxes\": [{\n            \"id\": \"v1\",\n            \"axisAlpha\": 0,\n            \"position\": \"left\",\n            \"ignoreAxisWidth\":true\n          }],\n          \"balloon\": {\n            \"borderThickness\": 1,\n            \"shadowAlpha\": 0\n          },\n          \"graphs\": [{\n            \"id\": \"g1\",\n            \"balloon\":{\n              \"drop\":true,\n              \"adjustBorderColor\":false,\n              \"color\":\"#ffffff\"\n            },\n            \"bullet\": \"round\",\n            \"bulletBorderAlpha\": 1,\n            \"bulletColor\": \"#FFFFFF\",\n            \"bulletSize\": 5,\n            \"hideBulletsCount\": 50,\n            \"lineThickness\": 2,\n            \"title\": \"red line\",\n            \"useLineColorForBulletBorder\": true,\n            \"valueField\": \"value\",\n            \"balloonText\": \"<span style='font-size:18px;'>[[value]]</span>\"\n          }],\n          \"chartScrollbar\": {\n            \"graph\": \"g1\",\n            \"oppositeAxis\":false,\n            \"offset\":30,\n            \"scrollbarHeight\": 80,\n            \"backgroundAlpha\": 0,\n            \"selectedBackgroundAlpha\": 0.1,\n            \"selectedBackgroundColor\": \"#888888\",\n            \"graphFillAlpha\": 0,\n            \"graphLineAlpha\": 0.5,\n            \"selectedGraphFillAlpha\": 0,\n            \"selectedGraphLineAlpha\": 1,\n            \"autoGridCount\":true,\n            \"color\":\"#AAAAAA\"\n          },\n          \"chartCursor\": {\n            \"pan\": true,\n            \"valueLineEnabled\": true,\n            \"valueLineBalloonEnabled\": true,\n            \"cursorAlpha\":1,\n            \"cursorColor\":\"#258cbb\",\n            \"limitToGraph\":\"g1\",\n            \"valueLineAlpha\":0.2\n          },\n          \"valueScrollbar\":{\n            \"oppositeAxis\":false,\n            \"offset\":50,\n            \"scrollbarHeight\":10\n          },\n          \"categoryField\": \"date\",\n          \"categoryAxis\": {\n            \"parseDates\": true,\n            \"dashLength\": 1,\n            \"minorGridEnabled\": true\n          },\n          \"export\": {\n            \"enabled\": true\n          },\n          \"dataProvider\": dataList\n        });\n\n        chart.invalidateSize();\n        \n        chart.addListener(\"rendered\", renderedListener);\n        renderedListener();\n\n        chart.addListener(\"zoomed\", zoomedListener);\n\n        return chart;\n\n        function renderedListener() {\n          chart.zoomToIndexes(chart.dataProvider.length - 40, chart.dataProvider.length - 1);\n        }\n\n        function zoomedListener(event) {\n          // if (angular.isDefined(zoomedListenerTimer)) {\n          //   $timeout.cancel(zoomedListenerTimer);\n          // }\n          // zoomedListenerTimer = $timeout(function() {\n          //   $scope.$emit('periodSelection', {\n          //     startDate: event.startDate,\n          //     endDate: event.endDate\n          //   });\n          // }, 50 /* zooomed event buffer wait */);\n        }\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvExplorePageRelatedPagesCard', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: {\n        pageId: '=',\n        period: '='\n      },\n      templateUrl: 'app/explore-page/yv-explore-page-related-pages-card/yvExplorePageRelatedPagesCard.html'\n    };\n\n    return directive;\n  \n    /** @ngInject */\n    function controllerFunction(wikipediaPages, $scope) {\n      var vm = this;\n\n      // Check if page id is valid.\n      if (!wikipediaPages.isValidId($scope.pageId)) {\n        return;\n      }\n      \n      // Get page and period.\n      vm.page = wikipediaPages.getPageById($scope.pageId);\n      vm.period = $scope.period;\n    }\n  }\n\n})();\n\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvExplorePagePopularityCard', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: {\n        pageId: '=',\n        period: '='\n      },\n      templateUrl: 'app/explore-page/yv-explore-page-popularity-card/yvExplorePagePopularityCard.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction(wikipediaPages, $scope) {\n      var vm = this;\n\n      // Check if page id is valid.\n      if (!wikipediaPages.isValidId($scope.pageId)) {\n        return;\n      }\n      \n      // Get page and period.\n      vm.page = wikipediaPages.getPageById($scope.pageId);\n      vm.period = $scope.period;\n\n      // Mock data for chart.\n      vm.radarLabels = [\"Eating\", \"Drinking\", \"Sleeping\", \"Designing\", \"Coding\", \"Cycling\", \"Running\"];\n      vm.radarData = [\n        [65, 59, 90, 81, 56, 55, 40],\n        [28, 48, 40, 19, 96, 27, 100]\n      ];\n\n      vm.lineLabels = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\"];\n      vm.lineSeries = ['Series A', 'Series B'];\n      vm.lineData = [\n        [65, 59, 80, 81, 56, 55, 40],\n        [28, 48, 40, 19, 86, 27, 90]\n      ];\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvExplorePagePeriodSelectorCard', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: {\n        pageId: '=',\n        period: '='\n      },\n      templateUrl: 'app/explore-page/yv-explore-page-period-selector-card/yvExplorePagePeriodSelectorCard.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction(wikipediaPages, $scope, $log) {\n      var vm = this;\n\n      // Check if page id is valid.\n      if (!wikipediaPages.isValidId($scope.pageId)) {\n        return;\n      }\n      \n      // Get page and period.\n      vm.page = wikipediaPages.getPageById($scope.pageId);\n      vm.period = $scope.period;\n\n      vm.datePicker = {date: {startDate: vm.period.startDate, endDate: vm.period.endDate}};\n      vm.onApply = function() {\n        $scope.$emit('periodSelection', {\n          startDate: vm.datePicker.date.startDate.format('YYYY-MM-DD'),\n          endDate: vm.datePicker.date.endDate.format('YYYY-MM-DD')\n        });\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvExplorePageNavbar', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: {\n        pageId: '='\n      },\n      templateUrl: 'app/explore-page/yv-explore-page-navbar/yvExplorePageNavbar.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction(wikipediaPages, $scope, $state) {\n      var vm = this;\n\n      //      \n      vm.navbarMenuIsCollapsed = true;\n      vm.searchBoxInput = '';\n\n      //\n      vm.onChange = function() {\n        vm.onSubmit();\n      }\n\n      vm.onSubmit = function() {\n        $state.go('home', {\n          query: vm.searchBoxInput\n        });\n      }\n      \n      vm.stateToHome = function() {\n        $state.go('home');\n      }\n\n      vm.toggleNavbarMenu = function() {\n        vm.navbarMenuIsCollapsed = !vm.navbarMenuIsCollapsed;\n      }\n\n      //\n      if (!wikipediaPages.isValidId($scope.pageId)) {\n        return;\n      }\n      \n      vm.page = wikipediaPages.getPageById($scope.pageId);\n\n      vm.page.getTitle().then(function(title) {\n        vm.searchBoxInput = title;\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvExplorePageMainCard', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction(yaviConfig, wikipediaSources, $interpolate) {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      link: linkFunction,\n      restrict: 'E',\n      scope: {\n        pageId: '=',\n        period: '='\n      },\n      templateUrl: 'app/explore-page/yv-explore-page-main-card/yvExplorePageMainCard.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction(wikipediaPages, $scope) {\n      var vm = this;\n      \n      //\n      vm.carrouselSlides = [{\n        image: '/assets/images/fallback-thumbnail.png',\n        id: 0\n      }];\n      vm.carrouselNoWrap = false;\n\n      // Check if page id is valid.\n      if (!wikipediaPages.isValidId($scope.pageId)) {\n        return;\n      }\n      \n      // Get page and period.\n      vm.page = wikipediaPages.getPageById($scope.pageId);\n      vm.period = $scope.period;\n\n      // TODO: deduplicate this code.\n      vm.activeWikipediaSource = getWikipediaSourceById(yaviConfig.wikipediaId);\n      function getWikipediaSourceById(wikipediaId) {\n        var matchingWikipediaSource = undefined;\n        angular.forEach(wikipediaSources, function(wikipediaSource) {\n          if (wikipediaSource.wikipediaId == wikipediaId) {\n            matchingWikipediaSource = wikipediaSource;\n          }\n        });\n        return matchingWikipediaSource;\n      }\n    }\n\n    function linkFunction(scope, element) {\n      scope.vm.page.getImagesList().then(function(imagesList) {\n        if (imagesList.length > 0) {\n          scope.vm.carrouselSlides = [];\n          imagesList.sort(function(imageA, imageB) {\n            return imageB.width * imageB.height - imageA.width * imageA.height;\n          });\n          var imageId = 0;\n          angular.forEach(imagesList, function(image) {\n            scope.vm.carrouselSlides.push({\n              image: image.url,\n              id: imageId\n            });\n            imageId += 1;\n          });\n        }\n      });\n\n      scope.vm.page.getTitle().then(function(title) {\n        element.find('#page-title')\n            .html(title);\n      });\n      \n      scope.vm.page.getDescription().then(function(description) {\n        var pageDescriptionElement = element.find('#page-description');\n        pageDescriptionElement.html(description);\n        pageDescriptionElement.dotdotdot({\n          ellipsis: ' ...'\n        });\n      });\n\n      scope.vm.page.getCategoryList().then(function(categoryList) {\n        var listElement = element.find('#page-category-list');\n        var itemElementTemplate = '<li class=\"page-category-item\">{{ category }}</li>';\n        angular.forEach(categoryList, function(category) {\n          listElement.append($interpolate(itemElementTemplate)({\n            category: category\n          }));\n        });\n      });\n\n      var pageWikipediaLinkElement = element.find('#page-wikipedia-link');\n      var pageWikipediaLinkTemplate = 'https://{{wikipediaId}}.wikipedia.org/?curid={{pageId}}';\n      pageWikipediaLinkElement.attr('href', $interpolate(pageWikipediaLinkTemplate)({\n        wikipediaId: scope.vm.activeWikipediaSource.wikipediaId,\n        pageId: scope.vm.page.pageId\n      }));\n\n      scope.vm.page.getTitle().then(function(title) {\n        var pageGoogleLinkElement = element.find('#page-google-link');\n        pageGoogleLinkElement.attr('href', 'https://google.com/?q=' + title);\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvHomeSearchResults', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: true,\n      templateUrl: 'app/home/yv-home-search-results/yvHomeSearchResults.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction($scope) {\n      var vm = this;\n\n      // Home properties.\n      vm.searchResults = $scope.$parent.vm.searchResults;\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvHomeSearchBox', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      link: linkFunction,\n      restrict: 'E',\n      scope: true,\n      templateUrl: 'app/home/yv-home-search-box/yvHomeSearchBox.html'\n    };\n\n    return directive;\n  \n    /** @ngInject */\n    function controllerFunction($scope, $location, $anchorScroll, $timeout, wikipediaAPI, $state) {\n      var vm = this;\n\n      // Home properties.\n      vm.query = $scope.$parent.vm.query;\n      vm.searchResults = $scope.$parent.vm.searchResults;\n      vm.searchBoxInputDebounce = 150;\n      vm.searchOngoing = false;\n\n      // Search box change.\n      var onChangeTimerCurrent = undefined;\n      vm.onChange = function() {\n        onChangeTimerCurrent = $timeout(function() {\n          if (vm.query.value) {\n            vm.searchOngoing = true;\n            var onChangeTimerAtSearch = onChangeTimerCurrent;\n            wikipediaAPI.search(vm.query.value)\n                .then(function(searchResults) {\n                  if (onChangeTimerAtSearch == onChangeTimerCurrent) {\n                    vm.searchResults.value = searchResults;\n                  }\n                  vm.searchOngoing = false;\n                })\n                .catch(function() {\n                  vm.searchOngoing = false;\n                });\n          } else {\n            vm.searchResults.value = [];\n          }\n        });\n      }\n      $scope.$on(\"$destroy\", function() {\n        if (angular.isDefined(onChangeTimerCurrent)) {\n          $timeout.cancel(onChangeTimerCurrent);\n        }\n      });\n\n      // Search box submit.\n      vm.onSubmit = function() {\n        if (vm.searchResults.value.length > 0) {\n          $state.go('explorePage', {\n            pageId: vm.searchResults.value[0]\n          });\n        }\n      }\n    }\n    \n    function linkFunction(scope, element) {\n      element.find('#home-search-box-input').focus();\n      scope.vm.onChange();\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvHomeImagetype', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      restrict: 'E',\n      scope: true,\n      templateUrl: 'app/home/yv-home-imagetype/yvHomeImagetype.html'\n    };\n\n    return directive;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvHomeNavbar', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      controller: controllerFunction,\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: true,\n      templateUrl: 'app/home/yv-home-navbar/yvHomeNavbar.html'\n    };\n\n    return directive;\n    \n    /** @ngInject */\n    function controllerFunction($scope, wikipediaSources, yaviConfig, $state) {\n      var vm = this;\n      \n      // Home properties.\n      vm.query = $scope.$parent.vm.query;\n\n      // Collapsing.\n      vm.navbarMenuIsCollapsed = true;\n      vm.toggleNavbarMenu = function() {\n        vm.navbarMenuIsCollapsed = !vm.navbarMenuIsCollapsed;\n      }\n\n      // Wikipedia sources.\n      vm.wikipediaSources = wikipediaSources;\n      vm.activeWikipediaSource = getWikipediaSourceById(yaviConfig.wikipediaId);\n      vm.selectWikipediaSource = function(wikipediaId) {\n        var wikipediaSource = getWikipediaSourceById(wikipediaId);\n        if (angular.isDefined(wikipediaSource)) {\n          yaviConfig.wikipediaId = wikipediaSource.wikipediaId;\n          $state.go($state.current, {\n            query: vm.query.value\n          }, {reload: true, inherit: false});\n        }\n      }\n      \n      function getWikipediaSourceById(wikipediaId) {\n        var matchingWikipediaSource = undefined;\n        angular.forEach(wikipediaSources, function(wikipediaSource) {\n          if (wikipediaSource.wikipediaId == wikipediaId) {\n            matchingWikipediaSource = wikipediaSource;\n          }\n        });\n        return matchingWikipediaSource;\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvScrollOnClick', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction() {\n    var directive = {\n      link: linkFunction,\n      restrict: 'A'\n    };\n\n    return directive;\n    \n    function linkFunction(scope, element) {\n      element.on('click', function() {\n        angular.element('body').animate({\n          scrollTop: angular.element('yv-home-imagetype').offset().top\n        }, \"fast\");\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .factory('yvPageTitleConfig', factoryFunction);\n\n  /** @ngInject */\n  function factoryFunction($interpolate) {\n    var pageTitleTemplate = 'Yavi - {{pageTitle}}';\n    var defaultPageTitle = 'Visualize Wikipedia';\n    var pageTitle = defaultPageTitle;\n\n    return {\n      getPageTitle: getPageTitleFunction,\n      setPageTitle: setPageTitleFunction,\n      setDefaultPageTitle: setDefaultPageTitleFunction\n    };\n\n    function getPageTitleFunction() {\n      return $interpolate(pageTitleTemplate)({pageTitle: pageTitle});\n    }\n    \n    function setPageTitleFunction(newPageTitle) {\n      pageTitle = newPageTitle;\n    }\n    \n    function setDefaultPageTitleFunction() {\n      setPageTitleFunction(defaultPageTitle);\n    }\n  }\n  \n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .directive('yvPageTitle', directiveFunction);\n\n  /** @ngInject */\n  function directiveFunction(yvPageTitleConfig) {\n    var directive = {\n      link: linkFunction,\n      restrict: 'E',\n      scope: true,\n      template: '<title></title>'\n    };\n\n    return directive;\n    \n    function linkFunction(scope, element) {\n      scope.$watch(function() {\n        return yvPageTitleConfig.getPageTitle();\n      }, function(newPageTitle) {\n        element.find('title').html(newPageTitle);\n      });\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .factory('yaviServer', factoryFunction);\n\n  /** @ngInject */\n  function factoryFunction($http, yaviConfig, $interpolate) {\n\n    var factory = {};\n\n    factory.getPageSignal = function(signalType, pageId, dateFrom, dateTo) {\n      return $http\n        .jsonp(buildPageSignalQuery(signalType, pageId, dateFrom, dateTo))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (angular.isDefined(response)\n            && angular.isDefined(response.data)) {\n          return response.data;\n        }\n        onError();\n      }\n\n      function onError() {\n        throwYaviServerError(\"Signal could not be retrieved\");\n      }\n    }\n\n    factory.getPageRelatedPages = function(pageId, dateFrom, dateTo) {\n      return $http\n        .jsonp(buildPageRelatedPagesQuery(pageId, dateFrom, dateTo))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (angular.isDefined(response)\n            && angular.isDefined(response.data)) {\n          return response.data;\n        }\n        onError();\n      }\n\n      function onError() {\n        throwYaviServerError(\"RelatedPages could not be retrieved\");\n      }\n    }\n\n    return factory;\n\n    function buildPageSignalQuery(signalType, pageId, dateFrom, dateTo) {\n      var queryTemplate = '';\n      queryTemplate += 'http://localhost:8080/yavi-server/signal?';\n      queryTemplate += '&pageid={{pageId}}';\n      queryTemplate += '&wikipediaid={{wikipediaId}}';\n      queryTemplate += '&datefrom={{dateFrom}}';\n      queryTemplate += '&dateto={{dateTo}}';\n      queryTemplate += '&signaltype={{signalType}}';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        signalType: signalType,\n        pageId: pageId,\n        wikipediaId: yaviConfig.wikipediaId,\n        dateFrom: dateFrom,\n        dateTo: dateTo\n      });\n    }\n    \n    function buildPageRelatedPagesQuery(pageId, dateFrom, dateTo) {\n      var queryTemplate = '';\n      queryTemplate += 'http://localhost:8080/yavi-server/relatedpages?';\n      queryTemplate += '&pageid={{pageId}}';\n      queryTemplate += '&wikipediaid={{wikipediaId}}';\n      queryTemplate += '&datefrom={{dateFrom}}';\n      queryTemplate += '&dateto={{dateTo}}';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        pageId: pageId,\n        wikipediaId: yaviConfig.wikipediaId,\n        dateFrom: dateFrom,\n        dateTo: dateTo\n      });\n    }\n\n    function throwYaviServerError(errorMessage) {\n      throw $interpolate(\"Yavi Server: {{errorMessage}}.\")({errorMessage: errorMessage});\n    }\n  }\n  \n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .factory('wikipediaPages', factoryFunction);\n\n  /** @ngInject */\n  function factoryFunction(WikipediaPage) {\n    var pages = {};\n\n    return new function() {\n      this.isValidId = function(pageId) {\n        var pageIdInteger = parseInt(pageId, 10);\n        return pageIdInteger > 0;\n      }\n\n      this.getPageById = function(pageIdArg) {\n        var pageId = parseInt(pageIdArg, 10);\n        if (!pages.hasOwnProperty(pageId)) {\n          pages[pageId] = new WikipediaPage(pageId);\n        }\n        return pages[pageId];\n      }\n    }\n  }\n  \n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .service('WikipediaPage', serviceFunction);\n\n  /** @ngInject */\n  function serviceFunction($q, wikipediaAPI, yaviServer) {\n    return WikipediaPage;\n\n    function WikipediaPage(pageId) {\n\n      var self = this;\n\n      self.pageId = pageId;\n\n      // Page properties.\n      var categoryList = undefined;\n      var description = undefined;\n      var imagesList = undefined;\n      var numberOfAddedInlinksList = undefined;\n      var numberOfAddedOutlinksList = undefined;\n      var numberOfRevertedRevisionsList = undefined;\n      var numberOfRevisionsList = undefined;\n      var numberOfTotalOutlinksList = undefined;\n      var numberOfUniqueEditorsList = undefined;\n      var pageContentSizeList = undefined;\n      var relatedPages = undefined;\n      var thumbnail = undefined;\n      var title = undefined;\n\n      // Property promise getters.\n      self.getCategoryList = function() {\n        if (angular.isUndefined(categoryList)) {\n          return wikipediaAPI.getPageCategories(pageId)\n              .then(function(val) {\n                categoryList = val;\n                return categoryList;\n              });\n        }\n        return $q.when(categoryList);\n      }\n\n      self.getDescription = function() {\n        if (angular.isUndefined(description)) {\n          return wikipediaAPI.getPageDescription(pageId)\n              .then(function(val) {\n                description = val;\n                return description;\n              });\n        }\n        return $q.when(description);\n      }\n\n      self.getImagesList = function() {\n        if (angular.isUndefined(imagesList)) {\n          return wikipediaAPI.getPageImagesList(pageId)\n              .then(function(val) {\n                imagesList = val;\n                return imagesList;\n              });\n        }\n        return $q.when(imagesList);\n      }\n\n      self.getNumberOfAddedInlinksList = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(numberOfAddedInlinksList)) {\n        return yaviServer.getPageSignal(\"numberofaddedinlinks\", pageId, dateFrom, dateTo)\n            .then(function(val) {\n              numberOfAddedInlinksList = val;\n              return numberOfAddedInlinksList;\n            });\n        }\n        return $q.when(numberOfAddedInlinksList);\n      }\n\n      self.getNumberOfAddedOutlinksList = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(numberOfAddedOutlinksList)) {\n        return yaviServer.getPageSignal(\"numberofaddedoutlinks\", pageId, dateFrom, dateTo)\n            .then(function(val) {\n              numberOfAddedOutlinksList = val;\n              return numberOfAddedOutlinksList;\n            });\n        }\n        return $q.when(numberOfAddedOutlinksList);\n      }\n\n      self.getNumberOfRevertedRevisionsList = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(numberOfRevertedRevisionsList)) {\n        return yaviServer.getPageSignal(\"numberofrevertedrevisions\", pageId, dateFrom, dateTo)\n            .then(function(val) {\n              numberOfRevertedRevisionsList = val;\n              return numberOfRevertedRevisionsList;\n            });\n        }\n        return $q.when(numberOfRevertedRevisionsList);\n      }\n\n      self.getNumberOfRevisionsList = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(numberOfRevisionsList)) {\n        return yaviServer.getPageSignal(\"numberofrevisions\", pageId, dateFrom, dateTo)\n            .then(function(val) {\n              numberOfRevisionsList = val;\n              return numberOfRevisionsList;\n            });\n        }\n        return $q.when(numberOfRevisionsList);\n      }\n\n      self.getNumberOfTotalOutlinksList = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(numberOfTotalOutlinksList)) {\n        return yaviServer.getPageSignal(\"numberoftotaloutlinks\", pageId, dateFrom, dateTo)\n            .then(function(val) {\n              numberOfTotalOutlinksList = val;\n              return numberOfTotalOutlinksList;\n            });\n        }\n        return $q.when(numberOfTotalOutlinksList);\n      }\n\n      self.getNumberOfUniqueEditorsList = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(numberOfUniqueEditorsList)) {\n        return yaviServer.getPageSignal(\"numberofuniqueeditors\", pageId, dateFrom, dateTo)\n            .then(function(val) {\n              numberOfUniqueEditorsList = val;\n              return numberOfUniqueEditorsList;\n            });\n        }\n        return $q.when(numberOfUniqueEditorsList);\n      }\n\n      self.getPageContentSizeList = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(pageContentSizeList)) {\n        return yaviServer.getPageSignal(\"pagecontentsize\", pageId, dateFrom, dateTo)\n            .then(function(val) {\n              pageContentSizeList = val;\n              return pageContentSizeList;\n            });\n        }\n        return $q.when(pageContentSizeList);\n      }\n\n      self.getRelatedPages = function(dateFrom, dateTo) {\n        if (true || angular.isUndefined(relatedPages)) {\n          return yaviServer.getPageRelatedPages(pageId, dateFrom, dateTo)\n              .then(function(val) {\n                relatedPages = val;\n                return relatedPages;\n              });\n        }\n        return $q.when(relatedPages);\n      }\n\n      self.getThumbnail = function() {\n        if (angular.isUndefined(thumbnail)) {\n          return wikipediaAPI.getPageThumbnail(pageId)\n              .then(function(val) {\n                thumbnail = val;\n                return thumbnail;\n              });\n        }\n        return $q.when(thumbnail);\n      }\n\n      self.getTitle = function() {\n        if (angular.isUndefined(title)) {\n          return wikipediaAPI.getPageTitle(pageId)\n              .then(function(val) {\n                title = val;\n                return title;\n              });\n        }\n        return $q.when(title);\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .factory('wikipediaAPI', factoryFunction);\n\n  /** @ngInject */\n  function factoryFunction($http, yaviConfig, $q, $interpolate) {\n\n    var factory = {};\n\n    factory.getPageCategories = function(pageId) {\n      return $http\n        .jsonp(buildPageCategoriesQuery(pageId))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (response\n            && response.data\n            && response.data.query\n            && response.data.query.pages\n            && response.data.query.pages[pageId]\n            && response.data.query.pages[pageId].categories) {\n          var categories = response.data.query.pages[pageId].categories;\n          var categoryTitles = [];\n          angular.forEach(categories, function(category) {\n            var categoryTitle = category.title;\n            var categoryTitleNoPrefix =\n                categoryTitle.substr(categoryTitle.indexOf(':') + 1, categoryTitle.length);\n            this.push(categoryTitleNoPrefix);\n          }, categoryTitles);\n          return categoryTitles;\n        }\n        onError();\n      }\n\n      function onError() {\n        throwWikipediaAPIError(\"Categories could not be retrieved\");\n      }\n    }\n\n    factory.getPageDescription = function(pageId) {\n      return $http\n        .jsonp(buildPageBasicDataQuery(pageId))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (response\n            && response.data\n            && response.data.query\n            && response.data.query.pages\n            && response.data.query.pages[pageId]\n            && response.data.query.pages[pageId].extract) {\n          return response.data.query.pages[pageId].extract;\n        }\n        onError();\n      }\n\n      function onError() {\n        throwWikipediaAPIError(\"Description could not be retrieved\");\n      }\n    }\n\n    factory.getPageImagesList = function(pageId) {\n      return $http\n        .jsonp(buildPageImagesListQuery(pageId))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        var acceptedImageExtensions = ['bmp', 'eps', 'gif', 'jpeg', 'jpg',\n                                      'pcd', 'pct', 'pdf', 'pict', 'png',\n                                      'ps', 'psd', 'pub', 'svg', 'thm'];\n                                      \n        var blackListedImages = ['commons-logo.svg', 'ambox_scales.svg', 'ambox_current_red.svg',\n                                  'star_full.svg', 'star_empty.svg', 'searchtool.svg',\n                                  'crystal_clear_app_browser.png', 'padlock.svg', 'padlock-silver.svg',\n                                  'padlock-olive.svg', 'ambox_outdated_serious.svg', 'wikinews-logo.svg'];\n\n        if (response\n            && response.data\n            && response.data.query\n            && response.data.query.pages) {\n          var imageObjects = {};\n          angular.forEach(response.data.query.pages, function(page) {\n            if (page.imageinfo\n                && page.imageinfo.length > 0\n                && page.imageinfo[0].url\n                && page.imageinfo[0].width\n                && page.imageinfo[0].height) {\n              var url = page.imageinfo[0].url;\n              var width = page.imageinfo[0].width;\n              var height = page.imageinfo[0].height;\n              if (!imageObjects.hasOwnProperty(url)) {\n                if (100 <= width && width <= 1000 && 100 <= height && height <= 1000) {\n                  var urlLowerCase = url.toLowerCase();\n                  var isBlackListed = false;\n                  angular.forEach(blackListedImages, function(blackListedImage) {\n                    if (urlLowerCase.indexOf(blackListedImage) !== -1) {\n                      isBlackListed = true;\n                    }\n                  });\n                  if (!isBlackListed) {\n                    var extension = urlLowerCase.split('.').pop();\n                    if (acceptedImageExtensions.indexOf(extension) !== -1) {\n                      imageObjects[url] = {\n                        url: url,\n                        width: width,\n                        height: height\n                      };\n                    }\n                  }\n                }\n              }\n            }\n          });\n          var imageList = [];\n          angular.forEach(imageObjects, function(imageObject) {\n            imageList.push(imageObject);\n          })\n          return imageList;\n        }\n        onError();\n      }\n\n      function onError() {\n        throwWikipediaAPIError(\"Images list could not be retrieved\");\n      }\n    }\n\n    factory.getPageThumbnail = function(pageId) {\n      return $http\n        .jsonp(buildPageThumbnailQuery(pageId))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (response\n            && response.data\n            && response.data.query\n            && response.data.query.pages\n            && response.data.query.pages[pageId]\n            && response.data.query.pages[pageId].thumbnail\n            && response.data.query.pages[pageId].thumbnail.source) {\n          return response.data.query.pages[pageId].thumbnail.source;\n        }\n        onError();\n      }\n\n      function onError() {\n        throwWikipediaAPIError(\"Thumbnail could not be retrieved\");\n      }\n    }\n\n    factory.getPageTitle = function(pageId) {\n      return $http\n        .jsonp(buildPageBasicDataQuery(pageId))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (response\n            && response.data\n            && response.data.query\n            && response.data.query.pages\n            && response.data.query.pages[pageId]\n            && response.data.query.pages[pageId].title) {\n          return response.data.query.pages[pageId].title;\n        }\n        onError();\n      }\n\n      function onError() {\n        throwWikipediaAPIError(\"Title could not be retrieved\");\n      }\n    }\n\n    factory.search = function(query) {\n      return $http\n        .jsonp(buildSearchQuery(query))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (response\n            && response.data\n            && response.data.query\n            && response.data.query.search\n            && angular.isArray(response.data.query.search)) {\n          var results = response.data.query.search;\n          var pageIds = [], wrappedPromises = [];\n          angular.forEach(results, function(result) {\n            if (angular.isDefined(result.title)) {\n              var wrappedPromise = factory.getPageIdByTitle(result.title)\n                  .then(function(pageId) {\n                    return factory.getPageDescription(pageId)\n                        .then(function(pageDescription) {\n                          // TODO: improve disambiguation page detection logic.\n                          /* Only add if description is not too short. */\n                          if (pageDescription.length > 50) {\n                            pageIds.push(pageId);\n                          }\n                        });\n                  })\n                  .catch(function() {\n                    /* Skip if pageId cannot be retrieved. */\n                  });\n              wrappedPromises.push(wrappedPromise);\n            }\n          })\n          return $q.all(wrappedPromises).then(function() {\n            return pageIds;\n          });\n        }\n        onError();\n      }\n\n      function onError() {\n        throwWikipediaAPIError(\"Query results could not be retrieved\");\n      }\n    }\n\n    factory.getPageIdByTitle = function(title) {\n      return $http\n        .jsonp(buildPageIdByTitleQuery(title))\n        .then(onSuccess, onError);\n\n      function onSuccess(response) {\n        if (response\n            && response.data\n            && response.data.query\n            && response.data.query.pages) {\n          var pageIdArray = Object.keys(response.data.query.pages);\n          if (pageIdArray.length > 0) {\n            return pageIdArray[0];\n          }\n        }\n        onError();\n      }\n\n      function onError() {\n        throwWikipediaAPIError(\"Page Id could not be retrieved\");\n      }\n    }\n\n    return factory;\n\n    function buildPageCategoriesQuery(pageId) {\n      var queryTemplate = '';\n      queryTemplate += 'https://{{wikipediaId}}.wikipedia.org/w/api.php?';\n      queryTemplate += '&pageids={{pageId}}';\n      queryTemplate += '&action=query';\n      queryTemplate += '&prop=categories';\n      queryTemplate += '&clshow=!hidden';\n      queryTemplate += '&format=json';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        wikipediaId: yaviConfig.wikipediaId,\n        pageId: pageId\n      });\n    }\n\n    function buildPageBasicDataQuery(pageId) {\n      var queryTemplate = '';\n      queryTemplate += 'https://{{wikipediaId}}.wikipedia.org/w/api.php?';\n      queryTemplate += '&pageids={{pageId}}';\n      queryTemplate += '&action=query';\n      queryTemplate += '&prop=extracts';\n      queryTemplate += '&exintro=';\n      queryTemplate += '&explaintext=';\n      queryTemplate += '&format=json';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        wikipediaId: yaviConfig.wikipediaId,\n        pageId: pageId\n      });\n    }\n\n    function buildPageImagesListQuery(pageId) {\n      var queryTemplate = '';\n      queryTemplate += 'https://{{wikipediaId}}.wikipedia.org/w/api.php?';\n      queryTemplate += '&pageids={{pageId}}';\n      queryTemplate += '&action=query';\n      queryTemplate += '&generator=images';\n      queryTemplate += '&prop=imageinfo';\n      queryTemplate += '&iiprop=url|dimensions';\n      queryTemplate += '&gimlimit=10';\n      queryTemplate += '&format=json';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        wikipediaId: yaviConfig.wikipediaId,\n        pageId: pageId\n      });\n    }\n\n    function buildPageThumbnailQuery(pageId) {\n      var queryTemplate = '';\n      queryTemplate += 'https://{{wikipediaId}}.wikipedia.org/w/api.php?';\n      queryTemplate += '&pageids={{pageId}}';\n      queryTemplate += '&action=query';\n      queryTemplate += '&prop=pageimages';\n      queryTemplate += '&pithumbsize=500';\n      queryTemplate += '&format=json';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        wikipediaId: yaviConfig.wikipediaId,\n        pageId: pageId\n      });\n    }\n\n    function buildSearchQuery(query) {\n      var queryTemplate = '';\n      queryTemplate += 'https://{{wikipediaId}}.wikipedia.org/w/api.php?';\n      queryTemplate += '&action=query';\n      queryTemplate += '&list=search';\n      queryTemplate += '&srsearch={{query}}';\n      queryTemplate += '&srnamespace=0';\n      queryTemplate += '&srwhat=text';\n      queryTemplate += '&srprop=size';\n      queryTemplate += '&indexpageids=';\n      queryTemplate += '&redirects=';\n      queryTemplate += '&srlimit=20';\n      queryTemplate += '&format=json';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        wikipediaId: yaviConfig.wikipediaId,\n        query: query\n      });\n    }\n\n    function buildPageIdByTitleQuery(title) {\n      var queryTemplate = '';\n      queryTemplate += 'https://{{wikipediaId}}.wikipedia.org/w/api.php?';\n      queryTemplate += '&titles={{title}}';\n      queryTemplate += '&action=query';\n      queryTemplate += '&format=json';\n      queryTemplate += '&callback=JSON_CALLBACK';\n      return $interpolate(queryTemplate)({\n        wikipediaId: yaviConfig.wikipediaId,\n        title: title\n      });\n    }\n\n    function throwWikipediaAPIError(errorMessage) {\n      throw $interpolate(\"Wikipedia API: {{errorMessage}}.\")({errorMessage: errorMessage});\n    }\n  }\n  \n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .controller('PageNotFoundController', controllerFunction);\n\n  /** @ngInject */\n  function controllerFunction(yvPageTitleConfig, $state) {\n    var vm = this;\n\n    yvPageTitleConfig.setDefaultPageTitle();\n\n    vm.stateToHome = function() {\n      $state.go('home');\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .controller('ExplorePageController', controllerFunction);\n\n  /** @ngInject */\n  function controllerFunction(wikipediaPages, $stateParams, yvPageTitleConfig, $state, $location) {\n    var vm = this;\n\n    if (!wikipediaPages.isValidId($stateParams.pageId)) {\n      $state.go('pageNotFound');\n    }\n\n    //\n    vm.page = wikipediaPages.getPageById($stateParams.pageId);\n    vm.period = {\n      startDate: $stateParams.startDate || '2014-01-01',\n      endDate: $stateParams.endDate || '2014-03-01'\n    };\n\n    vm.page.getTitle().then(function(title) {\n      yvPageTitleConfig.setPageTitle(title);\n    }).catch(function() {\n      $state.go('pageNotFound');\n    });\n\n    vm.absoluteURL = $location.absUrl();\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .controller('HomeController', controllerFunction);\n\n  /** @ngInject */\n  function controllerFunction(yvPageTitleConfig, $stateParams) {\n    var vm = this;\n\n    //\n    yvPageTitleConfig.setDefaultPageTitle();\n\n    //\n    vm.query = {value: $stateParams.query};\n    vm.searchResults = {value: []};\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .value('yaviConfig', {\n      wikipediaId: 'en'\n    });\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock() {\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider, $locationProvider) {\n    $stateProvider\n      .state('home', {\n        url: '/',\n        params: {\n          query: null\n        },\n        templateUrl: 'app/home/home.html',\n        controller: 'HomeController',\n        controllerAs: 'vm'\n      });\n\n    $stateProvider\n      .state('explorePage', {\n        url: '/explorePage/:pageId',\n        params: {\n          startDate: null,\n          endDate: null\n        },\n        templateUrl: 'app/explore-page/explorePage.html',\n        controller: 'ExplorePageController',\n        controllerAs: 'vm'\n      });\n\n    $stateProvider\n      .state('pageNotFound', {\n        url: '/pageNotFound/',\n        templateUrl: 'app/page-not-found/pageNotFound.html',\n        controller: 'PageNotFoundController',\n        controllerAs: 'vm'\n      });\n\n    $urlRouterProvider.otherwise('/');\n\n    $locationProvider.html5Mode(true);\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .constant('wikipediaSources', [\n      {wikipediaId: 'en', flagId: 'gb', language: 'English'},\n      {wikipediaId: 'de', flagId: 'de', language: 'Deutsch'},\n      {wikipediaId: 'ja', flagId: 'jp', language: '日本語'},\n      {wikipediaId: 'ru', flagId: 'ru', language: 'Русский'},\n      {wikipediaId: 'es', flagId: 'es', language: 'Español'},\n      {wikipediaId: 'fr', flagId: 'fr', language: 'Français'},\n      {wikipediaId: 'it', flagId: 'it', language: 'Italiano'},\n      {wikipediaId: 'pt', flagId: 'pt', language: 'Português'},\n      {wikipediaId: 'zh', flagId: 'cn', language: '中文'},\n      {wikipediaId: 'pl', flagId: 'pl', language: 'Polski'}\n    ]);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('yavi')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, $httpProvider, $provide) {\n    // Logging enabled/disabled.\n    $logProvider.debugEnabled(true);\n    \n    // Cache all http requests.\n    $httpProvider.defaults.cache = true;\n\n    // Custom exception handling.\n    /** @ngInject */\n    $provide.decorator(\"$exceptionHandler\", function($log) {\n      return function(exception) {\n        $log.debug(exception);\n      };\n    });\n  }\n\n})();\n\nangular.module(\"yavi\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/explore-page/explorePage.html\",\"<div id=\\\"explore-page-wrapper\\\"><yv-explore-page-navbar page-id=\\\"vm.page.pageId\\\"></yv-explore-page-navbar><div id=\\\"explore-page-cards-wrapper-1\\\"><div id=\\\"explore-page-cards-wrapper-2\\\"><div id=\\\"explore-page-cards-wrapper-3\\\"><div id=\\\"explore-page-cards-left\\\"><yv-explore-page-main-card page-id=\\\"vm.page.pageId\\\" period=\\\"vm.period\\\"></yv-explore-page-main-card><yv-explore-page-related-pages-card page-id=\\\"vm.page.pageId\\\" period=\\\"vm.period\\\"></yv-explore-page-related-pages-card></div><div id=\\\"explore-page-cards-right\\\"><yv-explore-page-period-selector-card page-id=\\\"vm.page.pageId\\\" period=\\\"vm.period\\\"></yv-explore-page-period-selector-card><yv-explore-page-signals-card page-id=\\\"vm.page.pageId\\\" period=\\\"vm.period\\\"></yv-explore-page-signals-card><yv-explore-page-popularity-card page-id=\\\"vm.page.pageId\\\" period=\\\"vm.period\\\"></yv-explore-page-popularity-card></div></div></div></div></div>\");\n$templateCache.put(\"app/home/home.html\",\"<div id=\\\"home-wrapper\\\"><yv-home-navbar></yv-home-navbar><yv-home-imagetype></yv-home-imagetype><yv-home-search-box yv-scroll-on-click=\\\"\\\"></yv-home-search-box><yv-home-search-results></yv-home-search-results></div>\");\n$templateCache.put(\"app/page-not-found/pageNotFound.html\",\"<div id=\\\"page-not-found-wrapper\\\"><yv-page-not-found-navbar></yv-page-not-found-navbar><div id=\\\"page-not-found-content\\\" ng-click=\\\"vm.stateToHome()\\\"><h1 id=\\\"page-not-found-header\\\">Sorry, something went wrong...<hr><small>Click <em>here</em> to go back</small></h1><div id=\\\"page-not-found-isotype\\\"></div></div></div>\");\n$templateCache.put(\"app/explore-page/yv-explore-page-main-card/yvExplorePageMainCard.html\",\"<div id=\\\"explore-page-main-card-wrapper\\\"><div id=\\\"main-card-panel\\\"><div id=\\\"main-card-panel-heading\\\" uib-tooltip=\\\"General Information\\\" tooltip-placement=\\\"bottom-right\\\"><h3 id=\\\"main-card-panel-title\\\"><span class=\\\"glyphicon glyphicon-globe\\\" aria-hidden=\\\"true\\\"></span></h3></div><div id=\\\"main-card-panel-body\\\"><div id=\\\"main-card-panel-body-left\\\"><h2 id=\\\"page-title\\\"></h2><hr><div id=\\\"page-images-carrousel\\\"><uib-carousel no-wrap=\\\"vm.carrouselNoWrap\\\"><uib-slide ng-repeat=\\\"slide in vm.carrouselSlides\\\" active=\\\"slide.active\\\" index=\\\"slide.id\\\"><img ng-src=\\\"{{slide.image}}\\\"><div class=\\\"carousel-caption\\\"></div></uib-slide></uib-carousel></div><div id=\\\"page-description\\\"></div></div><div id=\\\"main-card-panel-body-right\\\"><ul id=\\\"page-category-list\\\"></ul><a id=\\\"page-wikipedia-link\\\" target=\\\"_blank\\\" href=\\\"#\\\">Wikipedia</a> <a id=\\\"page-google-link\\\" target=\\\"_blank\\\" href=\\\"#\\\">Google</a></div></div></div></div>\");\n$templateCache.put(\"app/explore-page/yv-explore-page-navbar/yvExplorePageNavbar.html\",\"<div id=\\\"explore-page-navbar-wrapper\\\"><nav class=\\\"navbar navbar-default\\\"><div class=\\\"container-fluid\\\"><div class=\\\"navbar-header\\\"><button type=\\\"button\\\" class=\\\"navbar-toggle\\\" ng-click=\\\"vm.toggleNavbarMenu()\\\" aria-expanded=\\\"false\\\"><span class=\\\"sr-only\\\">Toggle navigation</span> <span class=\\\"icon-bar\\\"></span> <span class=\\\"icon-bar\\\"></span> <span class=\\\"icon-bar\\\"></span></button> <a class=\\\"navbar-brand\\\" href=\\\"#\\\" ng-click=\\\"vm.stateToHome()\\\"><img id=\\\"isotype\\\" src=\\\"assets/images/isotype-small.png\\\" alt=\\\"Yavi\\\"></a></div><div class=\\\"collapse navbar-collapse\\\" collapse=\\\"collapsed\\\" uib-collapse=\\\"vm.navbarMenuIsCollapsed\\\"><ul class=\\\"nav navbar-nav navbar-right\\\"><li><a href=\\\"#\\\">Home</a></li><li class=\\\"dropdown\\\" uib-dropdown=\\\"\\\"><a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle=\\\"\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">Settings <span class=\\\"caret\\\"></span></a><ul class=\\\"dropdown-menu\\\" uib-dropdown-menu=\\\"\\\" role=\\\"menu\\\"><li><a href=\\\"#\\\">Action</a></li><li><a href=\\\"#\\\">Another action</a></li><li><a href=\\\"#\\\">Something else here</a></li><li role=\\\"separator\\\" class=\\\"divider\\\"></li><li><a href=\\\"#\\\">Separated link</a></li><li role=\\\"separator\\\" class=\\\"divider\\\"></li><li><a href=\\\"#\\\">One more separated link</a></li></ul></li></ul><form class=\\\"navbar-form navbar-left\\\" role=\\\"search\\\"><div class=\\\"form-group\\\"><div class=\\\"input-group\\\"><input id=\\\"explore-page-search-box-input\\\" type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"vm.searchBoxInput\\\" ng-change=\\\"vm.onChange()\\\" placeholder=\\\"Search for a Wikipedia page...\\\" autocomplete=\\\"off\\\" autofocus=\\\"\\\"><div class=\\\"input-group-btn\\\"><button id=\\\"explore-page-search-box-button\\\" type=\\\"submit\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"vm.onSubmit()\\\"><span class=\\\"glyphicon glyphicon-search\\\" aria-hidden=\\\"true\\\"></span></button></div></div></div></form></div></div></nav></div>\");\n$templateCache.put(\"app/explore-page/yv-explore-page-period-selector-card/yvExplorePagePeriodSelectorCard.html\",\"<div id=\\\"explore-page-period-selector-card-wrapper\\\"><div id=\\\"period-selector-card-panel\\\"><div id=\\\"period-selector-card-panel-heading\\\" uib-tooltip=\\\"Period selection\\\" tooltip-placement=\\\"bottom-right\\\"><h3 id=\\\"period-selector-card-panel-title\\\"><span class=\\\"glyphicon glyphicon-calendar\\\" aria-hidden=\\\"true\\\"></span></h3></div><div id=\\\"period-selector-card-panel-body\\\"><div class=\\\"row\\\"><div class=\\\"col-xs-12 col-sm-8\\\"><h5>Select period of interest:</h5></div><div class=\\\"col-xs-12 col-sm-4\\\"><input date-range-picker=\\\"\\\" class=\\\"form-control date-picker\\\" type=\\\"text\\\" ng-model=\\\"vm.datePicker.date\\\" options=\\\"{eventHandlers: {\\'apply.daterangepicker\\': vm.onApply}}\\\"></div></div></div></div></div>\");\n$templateCache.put(\"app/explore-page/yv-explore-page-popularity-card/yvExplorePagePopularityCard.html\",\"<div id=\\\"explore-page-popularity-card-wrapper\\\"><div id=\\\"popularity-card-panel\\\"><div id=\\\"popularity-card-panel-heading\\\" uib-tooltip=\\\"Compared Popularity\\\" tooltip-placement=\\\"bottom-right\\\"><h3 id=\\\"popularity-card-panel-title\\\"><span class=\\\"glyphicon glyphicon-fire\\\" aria-hidden=\\\"true\\\"></span></h3></div><div id=\\\"popularity-card-panel-body\\\"><canvas id=\\\"radar\\\" class=\\\"chart chart-radar\\\" chart-data=\\\"vm.radarData\\\" chart-labels=\\\"vm.radarLabels\\\"></canvas></div></div></div>\");\n$templateCache.put(\"app/explore-page/yv-explore-page-related-pages-card/yvExplorePageRelatedPagesCard.html\",\"<div id=\\\"explore-page-related-pages-card-wrapper\\\"><div id=\\\"related-pages-card-panel\\\"><div id=\\\"related-pages-card-panel-heading\\\" uib-tooltip=\\\"Related Pages\\\" tooltip-placement=\\\"bottom-right\\\"><h3 id=\\\"related-pages-card-panel-title\\\"><span class=\\\"glyphicon glyphicon-duplicate\\\" aria-hidden=\\\"true\\\"></span></h3></div><div id=\\\"related-pages-card-panel-body\\\"><yv-related-pages-bubble-chart page-id=\\\"vm.page.pageId\\\" period=\\\"vm.period\\\"></yv-related-pages-bubble-chart></div></div></div>\");\n$templateCache.put(\"app/explore-page/yv-explore-page-signals-card/yvExplorePageSignalsCard.html\",\"<div id=\\\"explore-page-signals-card-wrapper\\\"><div id=\\\"signals-card-panel\\\"><div id=\\\"signals-card-panel-heading\\\" uib-tooltip=\\\"Popularity Signals\\\" tooltip-placement=\\\"bottom-right\\\"><h3 id=\\\"signals-card-panel-title\\\"><span class=\\\"glyphicon glyphicon-equalizer\\\" aria-hidden=\\\"true\\\"></span></h3></div><div id=\\\"signals-card-panel-body\\\"><uib-tabset stacked=\\\"true\\\"><uib-tab heading=\\\"Revisions\\\" select=\\\"vm.onSelect(\\'number-of-revisions\\')\\\"><div id=\\\"chart-number-of-revisions\\\" style=\\\"width:100%;height:500px;\\\"></div></uib-tab><uib-tab heading=\\\"Page Content Size\\\" select=\\\"vm.onSelect(\\'page-content-size\\')\\\"><div id=\\\"chart-page-content-size\\\" style=\\\"width:100%;height:500px;\\\"></div></uib-tab></uib-tabset></div></div></div>\");\n$templateCache.put(\"app/home/yv-home-imagetype/yvHomeImagetype.html\",\"<div id=\\\"home-imagetype-wrapper\\\"><img id=\\\"imagetype\\\" src=\\\"/assets/images/imagetype.png\\\" alt=\\\"Yavi - Visualize Wikipedia\\\"></div>\");\n$templateCache.put(\"app/home/yv-home-navbar/yvHomeNavbar.html\",\"<div id=\\\"home-navbar-wrapper\\\"><nav class=\\\"navbar navbar-default\\\"><div class=\\\"container-fluid\\\"><div class=\\\"navbar-header\\\"><button type=\\\"button\\\" class=\\\"navbar-toggle\\\" ng-click=\\\"vm.toggleNavbarMenu()\\\" aria-expanded=\\\"false\\\"><span class=\\\"sr-only\\\">Toggle navigation</span> <span class=\\\"icon-bar\\\"></span> <span class=\\\"icon-bar\\\"></span> <span class=\\\"icon-bar\\\"></span></button> <a class=\\\"navbar-brand\\\" href=\\\"#\\\"><img id=\\\"isotype\\\" src=\\\"assets/images/isotype-small.png\\\" alt=\\\"Yavi\\\"></a></div><div class=\\\"collapse navbar-collapse\\\" uib-collapse=\\\"vm.navbarMenuIsCollapsed\\\"><ul class=\\\"nav navbar-nav navbar-right\\\"><li><a href=\\\"#\\\">About</a></li><li><a href=\\\"#\\\">Contact</a></li><li class=\\\"dropdown\\\" uib-dropdown=\\\"\\\"><a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle=\\\"\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\">Wikipedia Source <span class=\\\"flag-icon flag-icon-{{vm.activeWikipediaSource.flagId}}\\\"></span> <span class=\\\"caret\\\"></span></a><ul class=\\\"dropdown-menu\\\" uib-dropdown-menu=\\\"\\\" role=\\\"menu\\\"><li ng-repeat=\\\"wikipediaSource in vm.wikipediaSources\\\"><a href=\\\"#\\\" ng-click=\\\"vm.selectWikipediaSource(wikipediaSource.wikipediaId)\\\"><span class=\\\"flag-icon flag-icon-{{wikipediaSource.flagId}}\\\"></span> {{wikipediaSource.language}}</a></li></ul></li></ul></div></div></nav></div>\");\n$templateCache.put(\"app/home/yv-home-search-box/yvHomeSearchBox.html\",\"<div id=\\\"home-search-box-wrapper\\\"><form class=\\\"form-horizontal\\\"><div class=\\\"form-group\\\"><div class=\\\"input-group\\\"><input id=\\\"home-search-box-input\\\" type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"vm.query.value\\\" ng-change=\\\"vm.onChange()\\\" ng-model-options=\\\"{debounce:vm.searchBoxInputDebounce}\\\" placeholder=\\\"Search for a Wikipedia page...\\\" autocomplete=\\\"off\\\" autofocus=\\\"\\\"><div class=\\\"input-group-btn\\\"><button id=\\\"home-search-box-button\\\" type=\\\"submit\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"vm.onSubmit()\\\"><span class=\\\"glyphicon glyphicon-search\\\" aria-hidden=\\\"true\\\"></span></button></div></div></div></form><div id=\\\"home-search-box-loading\\\" ng-show=\\\"vm.searchOngoing\\\"></div></div>\");\n$templateCache.put(\"app/home/yv-home-search-results/yvHomeSearchResults.html\",\"<div id=\\\"home-search-results-wrapper\\\"><yv-home-search-results-card ng-repeat=\\\"pageId in vm.searchResults.value | limitTo: 11\\\"></yv-home-search-results-card></div>\");\n$templateCache.put(\"app/page-not-found/yv-page-not-found-navbar/yvPageNotFoundNavbar.html\",\"<div id=\\\"page-not-found-navbar-wrapper\\\"><nav class=\\\"navbar navbar-default\\\"><div class=\\\"container-fluid\\\"><div class=\\\"navbar-header\\\"><a class=\\\"navbar-brand\\\" href=\\\"#\\\" ng-click=\\\"vm.stateToHome()\\\"><img id=\\\"isotype\\\" src=\\\"assets/images/isotype-small.png\\\" alt=\\\"Yavi\\\"></a></div></div></nav></div>\");\n$templateCache.put(\"app/explore-page/yv-explore-page-related-pages-card/yv-related-pages-bubble-chart/yvRelatedPagesBubbleChart.html\",\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:ev=\\\"http://www.w3.org/2001/xml-events\\\" width=\\\"0\\\" height=\\\"0\\\"><defs><pattern id=\\\"image1\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image2\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image3\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image4\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image5\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image6\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image7\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image8\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image9\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern><pattern id=\\\"image10\\\" x=\\\"0\\\" y=\\\"0\\\" patternunits=\\\"userSpaceOnUse\\\" height=\\\"100\\\" width=\\\"100\\\"><image x=\\\"0\\\" y=\\\"0\\\" height=\\\"100\\\" width=\\\"100\\\" xlink:href=\\\"/assets/images/fallback-thumbnail.png\\\"></image></pattern></defs></svg><div id=\\\"bubble-chart\\\"></div>\");\n$templateCache.put(\"app/home/yv-home-search-results/yv-home-search-results-card/yvHomeSearchResultsCard.html\",\"<div class=\\\"home-search-results-card-wrapper\\\"><div class=\\\"card\\\" ng-click=\\\"vm.onCardClick()\\\"><div class=\\\"card-body\\\"><div class=\\\"card-body-left\\\"><div class=\\\"page-thumbnail\\\"></div></div><div class=\\\"card-body-right\\\"><div class=\\\"card-text\\\"><h4 class=\\\"page-title\\\"></h4><hr><p class=\\\"page-description\\\"></p></div></div></div><div class=\\\"card-footer\\\"><ul class=\\\"page-category-list\\\"></ul></div></div></div>\");}]);"],"sourceRoot":"/source/"}